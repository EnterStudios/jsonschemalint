
(function(){var O={},_1=require("./jsv").JSV,_2,_3,_4,_5,_6;_3={"string":function(_7,_8){return _7.getType()==="string";},"number":function(_9,_a){return _9.getType()==="number";},"integer":function(_b,_c){return _b.getType()==="number"&&_b.getValue()%1===0;},"boolean":function(_d,_e){return _d.getType()==="boolean";},"object":function(_f,_10){return _f.getType()==="object";},"array":function(_11,_12){return _11.getType()==="array";},"null":function(_13,_14){return _13.getType()==="null";},"any":function(_15,_16){return true;}};_2=new _1.Environment();_2.setOption("defaultFragmentDelimiter",".");_2.setOption("defaultSchemaURI","http://json-schema.org/schema#");_4=_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/schema#","type":"object","properties":{"type":{"type":["string","array"],"items":{"type":["string",{"$ref":"#"}]},"optional":true,"uniqueItems":true,"default":"any","parser":function(_17,_18){var _19;if(_17.getType()==="string"){return _17.getValue();}else{if(_17.getType()==="object"){return _17.getEnvironment().createSchema(_17,_18.getEnvironment().findSchema(_18.resolveURI("#")));}else{if(_17.getType()==="array"){_19=_18.getValueOfProperty("parser");return _1.mapArray(_17.getProperties(),function(_1a){return _19(_1a,_18);});}}}return "any";},"validator":function(_1b,_1c,_1d,_1e,_1f,_20,_21){var _22=_1.toArray(_1c.getAttribute("type")),x,xl,_23,_24,_25;if(_1b.getType()!=="undefined"&&_22&&_22.length){_25=_1d.getValueOfProperty("typeValidators")||{};for(x=0,xl=_22.length;x<xl;++x){_23=_22[x];if(_1.isJSONSchema(_23)){_24=_1.createObject(_1e);_24.errors=[];_24.validated=_1.clone(_1e.validated);if(_23.validate(_1b,_24,_1f,_20,_21).errors.length===0){return true;}}else{if(_25[_23]!==O[_23]&&typeof _25[_23]==="function"){if(_25[_23](_1b,_1e)){return true;}}else{return true;}}}_1e.addError(_1b,_1c,"type","Instance is not a required type",_22);return false;}return true;},"typeValidators":_3},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"optional":true,"default":{},"parser":function(_26,_27,arg){var env=_26.getEnvironment(),_28=_27.getEnvironment();if(_26.getType()==="object"){if(arg){return env.createSchema(_26.getProperty(arg),_28.findSchema(_27.resolveURI("#")));}else{return _1.mapObject(_26.getProperties(),function(_29){return env.createSchema(_29,_28.findSchema(_27.resolveURI("#")));});}}return {};},"validator":function(_2a,_2b,_2c,_2d,_2e,_2f,_30){var _31,key;if(_2a.getType()==="object"){_31=_2b.getAttribute("properties");for(key in _31){if(_31[key]!==O[key]&&_31[key]){_31[key].validate(_2a.getProperty(key),_2d,_2a,_2b,key);}}}}},"items":{"type":[{"$ref":"#"},"array"],"items":{"$ref":"#"},"optional":true,"default":{},"parser":function(_32,_33){if(_32.getType()==="object"){return _32.getEnvironment().createSchema(_32,_33.getEnvironment().findSchema(_33.resolveURI("#")));}else{if(_32.getType()==="array"){return _1.mapArray(_32.getProperties(),function(_34){return _34.getEnvironment().createSchema(_34,_33.getEnvironment().findSchema(_33.resolveURI("#")));});}}return _32.getEnvironment().createEmptySchema();},"validator":function(_35,_36,_37,_38,_39,_3a,_3b){var _3c,_3d,x,xl,_3e,_3f;if(_35.getType()==="array"){_3c=_35.getProperties();_3d=_36.getAttribute("items");_3f=_36.getAttribute("additionalProperties");if(_1.typeOf(_3d)==="array"){for(x=0,xl=_3c.length;x<xl;++x){_3e=_3d[x]||_3f;if(_3e!==false){_3e.validate(_3c[x],_38,_35,_36,x);}else{_38.addError(_35,_36,"additionalProperties","Additional items are not allowed",_3e);}}}else{_3e=_3d||_3f;for(x=0,xl=_3c.length;x<xl;++x){_3e.validate(_3c[x],_38,_35,_36,x);}}}}},"optional":{"type":"boolean","optional":true,"default":false,"parser":function(_40,_41){return !!_40.getValue();},"validator":function(_42,_43,_44,_45,_46,_47,_48){if(_42.getType()==="undefined"&&!_43.getAttribute("optional")){_45.addError(_42,_43,"optional","Property is required",false);}},"validationRequired":true},"additionalProperties":{"type":[{"$ref":"#"},"boolean"],"optional":true,"default":{},"parser":function(_49,_4a){if(_49.getType()==="object"){return _49.getEnvironment().createSchema(_49,_4a.getEnvironment().findSchema(_4a.resolveURI("#")));}else{if(_49.getType()==="boolean"&&_49.getValue()===false){return false;}}return _49.getEnvironment().createEmptySchema();},"validator":function(_4b,_4c,_4d,_4e,_4f,_50,_51){var _52,_53,_54,key;if(_4b.getType()==="object"){_52=_4c.getAttribute("additionalProperties");_53=_4c.getAttribute("properties")||{};_54=_4b.getProperties();for(key in _54){if(_54[key]!==O[key]&&_54[key]&&!_53[key]){if(_1.isJSONSchema(_52)){_52.validate(_54[key],_4e,_4b,_4c,key);}else{if(_52===false){_4e.addError(_4b,_4c,"additionalProperties","Additional properties are not allowed",_52);}}}}}}},"requires":{"type":["string",{"$ref":"#"}],"optional":true,"parser":function(_55,_56){if(_55.getType()==="string"){return _55.getValue();}else{if(_55.getType()==="object"){return _55.getEnvironment().createSchema(_55,_56.getEnvironment().findSchema(_56.resolveURI("#")));}}},"validator":function(_57,_58,_59,_5a,_5b,_5c,_5d){var _5e;if(_57.getType()!=="undefined"&&_5b&&_5b.getType()!=="undefined"){_5e=_58.getAttribute("requires");if(typeof _5e==="string"){if(_5b.getProperty(_5e).getType()==="undefined"){_5a.addError(_57,_58,"requires","Property requires sibling property \""+_5e+"\"",_5e);}}else{if(_1.isJSONSchema(_5e)){_5e.validate(_5b,_5a);}}}}},"minimum":{"type":"number","optional":true,"parser":function(_5f,_60){if(_5f.getType()==="number"){return _5f.getValue();}},"validator":function(_61,_62,_63,_64,_65,_66,_67){var _68,_69;if(_61.getType()==="number"){_68=_62.getAttribute("minimum");_69=_62.getAttribute("minimumCanEqual");if(typeof _68==="number"&&(_61.getValue()<_68||(_69===false&&_61.getValue()===_68))){_64.addError(_61,_62,"minimum","Number is less then the required minimum value",_68);}}}},"maximum":{"type":"number","optional":true,"parser":function(_6a,_6b){if(_6a.getType()==="number"){return _6a.getValue();}},"validator":function(_6c,_6d,_6e,_6f,_70,_71,_72){var _73,_74;if(_6c.getType()==="number"){_73=_6d.getAttribute("maximum");_74=_6d.getAttribute("maximumCanEqual");if(typeof _73==="number"&&(_6c.getValue()>_73||(_74===false&&_6c.getValue()===_73))){_6f.addError(_6c,_6d,"maximum","Number is greater then the required maximum value",_73);}}}},"minimumCanEqual":{"type":"boolean","optional":true,"requires":"minimum","default":true,"parser":function(_75,_76){if(_75.getType()==="boolean"){return _75.getValue();}return true;}},"maximumCanEqual":{"type":"boolean","optional":true,"requires":"maximum","default":true,"parser":function(_77,_78){if(_77.getType()==="boolean"){return _77.getValue();}return true;}},"minItems":{"type":"integer","optional":true,"minimum":0,"default":0,"parser":function(_79,_7a){if(_79.getType()==="number"){return _79.getValue();}return 0;},"validator":function(_7b,_7c,_7d,_7e,_7f,_80,_81){var _82;if(_7b.getType()==="array"){_82=_7c.getAttribute("minItems");if(typeof _82==="number"&&_7b.getProperties().length<_82){_7e.addError(_7b,_7c,"minItems","The number of items is less then the required minimum",_82);}}}},"maxItems":{"type":"integer","optional":true,"minimum":0,"parser":function(_83,_84){if(_83.getType()==="number"){return _83.getValue();}},"validator":function(_85,_86,_87,_88,_89,_8a,_8b){var _8c;if(_85.getType()==="array"){_8c=_86.getAttribute("maxItems");if(typeof _8c==="number"&&_85.getProperties().length>_8c){_88.addError(_85,_86,"maxItems","The number of items is greater then the required maximum",_8c);}}}},"pattern":{"type":"string","optional":true,"format":"regex","parser":function(_8d,_8e){if(_8d.getType()==="string"){try{return new RegExp(_8d.getValue());}catch(e){return e;}}},"validator":function(_8f,_90,_91,_92,_93,_94,_95){var _96;try{_96=_90.getAttribute("pattern");if(_96 instanceof Error){_92.addError(_8f,_90,"pattern","Invalid pattern",_96);}else{if(_8f.getType()==="string"&&_96&&!_96.test(_8f.getValue())){_92.addError(_8f,_90,"pattern","String does not match pattern",_96.toString());}}}catch(e){_92.addError(_8f,_90,"pattern","Invalid pattern",e);}}},"minLength":{"type":"integer","optional":true,"minimum":0,"default":0,"parser":function(_97,_98){if(_97.getType()==="number"){return _97.getValue();}return 0;},"validator":function(_99,_9a,_9b,_9c,_9d,_9e,_9f){var _a0;if(_99.getType()==="string"){_a0=_9a.getAttribute("minLength");if(typeof _a0==="number"&&_99.getValue().length<_a0){_9c.addError(_99,_9a,"minLength","String is less then the required minimum length",_a0);}}}},"maxLength":{"type":"integer","optional":true,"parser":function(_a1,_a2){if(_a1.getType()==="number"){return _a1.getValue();}},"validator":function(_a3,_a4,_a5,_a6,_a7,_a8,_a9){var _aa;if(_a3.getType()==="string"){_aa=_a4.getAttribute("maxLength");if(typeof _aa==="number"&&_a3.getValue().length>_aa){_a6.addError(_a3,_a4,"maxLength","String is greater then the required maximum length",_aa);}}}},"enum":{"type":"array","optional":true,"minItems":1,"uniqueItems":true,"parser":function(_ab,_ac){if(_ab.getType()==="array"){return _ab.getValue();}},"validator":function(_ad,_ae,_af,_b0,_b1,_b2,_b3){var _b4,x,xl;if(_ad.getType()!=="undefined"){_b4=_ae.getAttribute("enum");if(_b4){for(x=0,xl=_b4.length;x<xl;++x){if(_ad.equals(_b4[x])){return true;}}_b0.addError(_ad,_ae,"enum","Instance is not one of the possible values",_b4);}}}},"title":{"type":"string","optional":true},"description":{"type":"string","optional":true},"format":{"type":"string","optional":true,"parser":function(_b5,_b6){if(_b5.getType()==="string"){return _b5.getValue();}},"validator":function(_b7,_b8,_b9,_ba,_bb,_bc,_bd){var _be,_bf;if(_b7.getType()==="string"){_be=_b8.getAttribute("format");_bf=_b9.getValueOfProperty("formatValidators");if(typeof _be==="string"&&_bf[_be]!==O[_be]&&typeof _bf[_be]==="function"&&!_bf[_be].call(this,_b7,_ba)){_ba.addError(_b7,_b8,"format","String is not in the required format",_be);}}},"formatValidators":{}},"contentEncoding":{"type":"string","optional":true},"default":{"type":"any","optional":true},"maxDecimal":{"type":"integer","optional":true,"minimum":0,"parser":function(_c0,_c1){if(_c0.getType()==="number"){return _c0.getValue();}},"validator":function(_c2,_c3,_c4,_c5,_c6,_c7,_c8){var _c9,_ca;if(_c2.getType()==="number"){_c9=_c3.getAttribute("maxDecimal");if(typeof _c9==="number"){_ca=_c2.getValue().toString(10).split(".")[1];if(_ca&&_ca.length>_c9){_c5.addError(_c2,_c3,"maxDecimal","The number of decimal places is greater then the allowed maximum",_c9);}}}}},"disallow":{"type":["string","array"],"items":{"type":"string"},"optional":true,"uniqueItems":true,"parser":function(_cb,_cc){if(_cb.getType()==="string"||_cb.getType()==="array"){return _cb.getValue();}},"validator":function(_cd,_ce,_cf,_d0,_d1,_d2,_d3){var _d4=_1.toArray(_ce.getAttribute("disallow")),x,xl,key,_d5;if(_cd.getType()!=="undefined"&&_d4&&_d4.length){_d5=_cf.getValueOfProperty("typeValidators")||{};for(x=0,xl=_d4.length;x<xl;++x){key=_d4[x];if(_d5[key]!==O[key]&&typeof _d5[key]==="function"){if(_d5[key](_cd,_d0)){_d0.addError(_cd,_ce,"disallow","Instance is a disallowed type",_d4);return false;}}}return true;}return true;},"typeValidators":_3},"extends":{"type":[{"$ref":"#"},"array"],"items":{"$ref":"#"},"optional":true,"default":{},"parser":function(_d6,_d7){if(_d6.getType()==="object"){return _d6.getEnvironment().createSchema(_d6,_d7.getEnvironment().findSchema(_d7.resolveURI("#")));}else{if(_d6.getType()==="array"){return _1.mapArray(_d6.getProperties(),function(_d8){return _d8.getEnvironment().createSchema(_d8,_d7.getEnvironment().findSchema(_d7.resolveURI("#")));});}}},"validator":function(_d9,_da,_db,_dc,_dd,_de,_df){var _e0=_da.getAttribute("extends"),x,xl;if(_e0){if(_1.isJSONSchema(_e0)){_e0.validate(_d9,_dc,_dd,_de,_df);}else{if(_1.typeOf(_e0)==="array"){for(x=0,xl=_e0.length;x<xl;++x){_e0[x].validate(_d9,_dc,_dd,_de,_df);}}}}}}},"optional":true,"default":{},"fragmentResolution":"dot-delimited","parser":function(_e1,_e2){if(_e1.getType()==="object"){return _e1.getEnvironment().createSchema(_e1,_e2);}},"validator":function(_e3,_e4,_e5,_e6,_e7,_e8,_e9){var _ea=_e4.getPropertyNames(),x,xl,_eb=_e5.getAttribute("properties"),_ec;for(x in _eb){if(_eb[x]!==O[x]&&_eb[x].getValueOfProperty("validationRequired")){_1.pushUnique(_ea,x);}}for(x=0,xl=_ea.length;x<xl;++x){if(_eb[_ea[x]]!==O[_ea[x]]){_ec=_eb[_ea[x]].getValueOfProperty("validator");if(typeof _ec==="function"){_ec(_e3,_e4,_eb[_ea[x]],_e6,_e7,_e8,_e9);}}}},"initializer":function(_ed){var _ee,_ef,_f0;do{_ee=_ed._schema.getLink("full",_ed);if(_ee&&_ed._uri!==_ee&&_ed._env._schemas[_ee]){_ed=_ed._env._schemas[_ee];return _ed;}_ee=_ed._schema.getLink("describedby",_ed);if(_ee&&_ed._schema._uri!==_ee&&_ed._env._schemas[_ee]){_ed._schema=_ed._env._schemas[_ee];continue;}_ef=_ed.getAttribute("extends");if(_1.isJSONSchema(_ef)){_f0=_1.inherits(_ef,_ed,true);_ed=_ed._env.createSchema(_f0,_ed._schema,_ed._uri);}break;}while(true);_ee=_ed._schema.getLink("self",_ed);if(_ee){_ed._uri=_ee;}return _ed;}},true,"http://json-schema.org/schema#");_5=_2.createSchema(_1.inherits(_4,_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/hyper-schema#","properties":{"links":{"type":"array","items":{"$ref":"links#"},"optional":true,"parser":function(_f1,_f2,arg){var _f3,_f4=_f2.getValueOfProperty("items")["$ref"],_f5=_f2.getEnvironment().findSchema(_f4),_f6=_f5&&_f5.getValueOfProperty("parser");arg=_1.toArray(arg);if(typeof _f6==="function"){_f3=_1.mapArray(_f1.getProperties(),function(_f7){return _f6(_f7,_f5);});}else{_f3=_1.toArray(_f1.getValue());}if(arg[0]){_f3=_1.filterArray(_f3,function(_f8){return _f8["rel"]===arg[0];});}if(arg[1]){_f3=_1.mapArray(_f3,function(_f9){var _fa=arg[1],_fb=_f9["href"];_fb=_fb.replace(/\{(.+)\}/g,function(str,p1,_fc,s){var _fd;if(p1==="-this"){_fd=_fa.getValue();}else{_fd=_fa.getValueOfProperty(p1);}return _fd!==undefined?String(_fd):"";});return _fb?_1.formatURI(_fa.resolveURI(_fb)):_fb;});}return _f3;}},"fragmentResolution":{"type":"string","optional":true,"default":"dot-delimited"},"root":{"type":"boolean","optional":true,"default":false},"readonly":{"type":"boolean","optional":true,"default":false},"pathStart":{"type":"string","optional":true,"format":"uri","validator":function(_fe,_ff,self,_100,_101,_102,name){var _103;if(_fe.getType()!=="undefined"){_103=_ff.getAttribute("pathStart");if(typeof _103==="string"){if(_fe.getURI().indexOf(_103)!==0){_100.addError(_fe,_ff,"pathStart","Instance's URI does not start with "+_103,_103);}}}}},"mediaType":{"type":"string","optional":true,"format":"media-type"},"alternate":{"type":"array","items":{"$ref":"#"},"optional":true}},"links":[{"href":"{$ref}","rel":"full"},{"href":"{$schema}","rel":"describedby"},{"href":"{id}","rel":"self"}]},_4),true),true,"http://json-schema.org/hyper-schema#");_2.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");_6=_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/links#","type":"object","properties":{"href":{"type":"string"},"rel":{"type":"string"},"method":{"type":"string","default":"GET","optional":true},"enctype":{"type":"string","requires":"method","optional":true},"properties":{"type":"object","additionalProperties":{"$ref":"hyper-schema#"},"optional":true,"parser":function(_104,self,arg){var env=_104.getEnvironment(),_105=self.getEnvironment(),_106=self.getValueOfProperty("additionalProperties")["$ref"];if(_104.getType()==="object"){if(arg){return env.createSchema(_104.getProperty(arg),_105.findSchema(self.resolveURI(_106)));}else{return _1.mapObject(_104.getProperties(),function(_107){return env.createSchema(_107,_105.findSchema(self.resolveURI(_106)));});}}}}},"parser":function(_108,self){var _109=self.getProperty("properties");if(_108.getType()==="object"){return _1.mapObject(_108.getProperties(),function(_10a,key){var _10b=_109.getProperty(key),_10c=_10b&&_10b.getValueOfProperty("parser");if(typeof _10c==="function"){return _10c(_10a,_10b);}return _10a.getValue();});}return _108.getValue();}},_5,"http://json-schema.org/links#");_4=_2.createSchema(_4.getValue(),_5,"http://json-schema.org/schema#");_5=_2.createSchema(_5.getValue(),_5,"http://json-schema.org/hyper-schema#");_6=_2.createSchema(_6.getValue(),_5,"http://json-schema.org/links#");_1.registerEnvironment("json-schema-draft-00",_2);_1.registerEnvironment("json-schema-draft-01",_1.createEnvironment("json-schema-draft-00"));if(!_1.getDefaultEnvironmentID()){_1.setDefaultEnvironmentID("json-schema-draft-01");}}());
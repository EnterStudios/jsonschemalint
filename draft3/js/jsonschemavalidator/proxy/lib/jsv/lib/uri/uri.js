
if(typeof exports==="undefined"){exports={};}if(typeof require!=="function"){require=function(id){return exports;};}(function(){var _1=function(_2){var _3=arguments[0],x=1,_4=arguments[x];while(_4){_3=_3.slice(0,-1)+_4.slice(1);_4=arguments[++x];}return _3;},_5=function(_6){return "(?:"+_6+")";},_7="[A-Za-z]",_8="[\\x0D]",_9="[0-9]",_a="[\\x22]",_b=_1(_9,"[A-Fa-f]"),_c="[\\x0A]",_d="[\\x20]",_e=_5("%"+_b+_b),_f="[\\:\\/\\?\\#\\[\\]\\@]",_10="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",_11=_1(_f,_10),_12=_1(_7,_9,"[\\-\\.\\_\\~]"),_13=_5(_7+_1(_7,_9,"[\\+\\-\\.]")+"*"),_14=_5(_5(_e+"|"+_1(_12,_10,"[\\:]"))+"*"),_15=_5(_5("25[0-5]")+"|"+_5("2[0-4]"+_9)+"|"+_5("1"+_9+_9)+"|"+_5("[1-9]"+_9)+"|"+_9),_16=_5(_15+"\\."+_15+"\\."+_15+"\\."+_15),_17=_5(_b+"{1,4}"),_18=_5(_5(_17+"\\:"+_17)+"|"+_16),_19=_5(_1(_12,_10,"[\\:]")+"+"),_1a=_5("v"+_b+"+\\."+_1(_12,_10,"[\\:]")+"+"),_1b=_5("\\["+_5(_19+"|"+_1a)+"\\]"),_1c=_5(_5(_e+"|"+_1(_12,_10))+"*"),_1d=_5(_1b+"|"+_16+"|"+_1c),_1e=_5(_9+"*"),_1f=_5(_5(_14+"@")+"?"+_1d+_5("\\:"+_1e)+"?"),_20=_5(_e+"|"+_1(_12,_10,"[\\:\\@]")),_21=_5(_20+"*"),_22=_5(_20+"+"),_23=_5(_5(_e+"|"+_1(_12,_10,"[\\@]"))+"+"),_24=_5(_5("\\/"+_21)+"*"),_25=_5("\\/"+_5(_22+_24)+"?"),_26=_5(_23+_24),_27=_5(_22+_24),_28=_5(""),_29=_5(_24+"|"+_25+"|"+_26+"|"+_27+"|"+_28),_2a=_5(_5(_20+"|[\\/\\?]")+"*"),_2b=_5(_5(_20+"|[\\/\\?]")+"*"),_2c=_5(_5("\\/\\/"+_1f+_24)+"|"+_25+"|"+_27+"|"+_28),_2d=_5(_13+"\\:"+_2c+_5("\\?"+_2a)+"?"+_5("\\#"+_2b)+"?"),_2e=_5(_5("\\/\\/"+_1f+_24)+"|"+_25+"|"+_26+"|"+_28),_2f=_5(_2e+_5("\\?"+_2a)+"?"+_5("\\#"+_2b)+"?"),_30=_5(_2d+"|"+_2f),_31=_5(_13+"\\:"+_2c+_5("\\?"+_2a)+"?"),_32=new RegExp("^"+_5("("+_2d+")|("+_2f+")")+"$"),_33=new RegExp("^("+_13+")\\:"+_5(_5("\\/\\/("+_5("("+_14+")@")+"?("+_1d+")"+_5("\\:("+_1e+")")+"?)")+"?("+_24+"|"+_25+"|"+_27+"|"+_28+")")+_5("\\?("+_2a+")")+"?"+_5("\\#("+_2b+")")+"?$"),_34=new RegExp("^(){0}"+_5(_5("\\/\\/("+_5("("+_14+")@")+"?("+_1d+")"+_5("\\:("+_1e+")")+"?)")+"?("+_24+"|"+_25+"|"+_26+"|"+_28+")")+_5("\\?("+_2a+")")+"?"+_5("\\#("+_2b+")")+"?$"),_35=new RegExp("^("+_13+")\\:"+_5(_5("\\/\\/("+_5("("+_14+")@")+"?("+_1d+")"+_5("\\:("+_1e+")")+"?)")+"?("+_24+"|"+_25+"|"+_27+"|"+_28+")")+_5("\\?("+_2a+")")+"?$"),_36=new RegExp("^"+_5("\\#("+_2b+")")+"?$"),_37=new RegExp("^"+_5("("+_14+")@")+"?("+_1d+")"+_5("\\:("+_1e+")")+"?$"),_38=new RegExp(_1("[^]",_7,_9,"[\\+\\-\\.]"),"g"),_39=new RegExp(_1("[^\\%\\:]",_12,_10),"g"),_3a=new RegExp(_1("[^\\%]",_12,_10),"g"),_3b=new RegExp(_1("[^\\%\\/\\:\\@]",_12,_10),"g"),_3c=new RegExp(_1("[^\\%\\/\\@]",_12,_10),"g"),_3d=new RegExp(_1("[^\\%]",_12,_10,"[\\:\\@\\/\\?]"),"g"),_3e=_3d,_3f=new RegExp(_1("[^]",_12,_10),"g"),_40=new RegExp(_12,"g"),_41=new RegExp(_1("[^\\%]",_12,_11),"g"),_42=new RegExp(_e+"+","g"),_43=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,_44=/^\.\.?\//,_45=/^\/\.(\/|$)/,_46=/^\/\.\.(\/|$)/,_47=/^\.\.?$/,_48=/^\/?.*?(?=\/|$)/,_49=("").match(/(){0}/)[1]===undefined,_4a=function(chr){var c=chr.charCodeAt(0);if(c<128){return "%"+c.toString(16).toUpperCase();}else{if((c>127)&&(c<2048)){return "%"+((c>>6)|192).toString(16).toUpperCase()+"%"+((c&63)|128).toString(16).toUpperCase();}else{return "%"+((c>>12)|224).toString(16).toUpperCase()+"%"+(((c>>6)&63)|128).toString(16).toUpperCase()+"%"+((c&63)|128).toString(16).toUpperCase();}}},_4b=function(str){var _4c="",i=0,c,s;while(i<str.length){c=parseInt(str.substr(i+1,2),16);if(c<128){s=String.fromCharCode(c);if(s.match(_40)){_4c+=s;}else{_4c+=str.substr(i,3);}i+=3;}else{if((c>191)&&(c<224)){_4c+=str.substr(i,6);i+=6;}else{_4c+=str.substr(i,9);i+=9;}}}return _4c;},_4d=function(str){var _4e="",i=0,c,c2,c3;while(i<str.length){c=parseInt(str.substr(i+1,2),16);if(c<128){_4e+=String.fromCharCode(c);i+=3;}else{if((c>191)&&(c<224)){c2=parseInt(str.substr(i+4,2),16);_4e+=String.fromCharCode(((c&31)<<6)|(c2&63));i+=6;}else{c2=parseInt(str.substr(i+4,2),16);c3=parseInt(str.substr(i+7,2),16);_4e+=String.fromCharCode(((c&15)<<12)|((c2&63)<<6)|(c3&63));i+=9;}}}return _4e;},_4f=function(o){return o===undefined?"undefined":(o===null?"null":Object.prototype.toString.call(o).split(" ").pop().split("]").shift().toLowerCase());},_50=function(){this.errors=[];},URI={};_50.prototype={scheme:undefined,authority:undefined,userinfo:undefined,host:undefined,port:undefined,path:undefined,query:undefined,fragment:undefined,reference:undefined,errors:undefined};URI.SCHEMES={};URI.parse=function(_51,_52){var _53,_54=new _50(),_55;_51=_51?_51.toString():"";_52=_52||{};if(_52.reference==="suffix"){_51=(_52.scheme?_52.scheme+":":"")+"//"+_51;}_53=_51.match(_32);if(_53){if(_53[1]){_53=_51.match(_33);}else{_53=_51.match(_34);}}if(!_53){if(!_52.tolerant){_54.errors.push("URI is not strictly valid.");}_53=_51.match(_43);}if(_53){if(_49){_54.scheme=_53[1];_54.authority=_53[2];_54.userinfo=_53[3];_54.host=_53[4];_54.port=parseInt(_53[5],10);_54.path=_53[6]||"";_54.query=_53[7];_54.fragment=_53[8];if(isNaN(_54.port)){_54.port=_53[5];}}else{_54.scheme=_53[1]||undefined;_54.authority=(_51.indexOf("//")!==-1?_53[2]:undefined);_54.userinfo=(_51.indexOf("@")!==-1?_53[3]:undefined);_54.host=(_51.indexOf("//")!==-1?_53[4]:undefined);_54.port=parseInt(_53[5],10);_54.path=_53[6]||"";_54.query=(_51.indexOf("?")!==-1?_53[7]:undefined);_54.fragment=(_51.indexOf("#")!==-1?_53[8]:undefined);if(isNaN(_54.port)){_54.port=(_51.match(/\/\/.*\:(?:\/|\?|\#|$)/)?_53[4]:undefined);}}if(!_54.scheme&&!_54.authority&&!_54.path&&!_54.query){_54.reference="same-document";}else{if(!_54.scheme){_54.reference="relative";}else{if(!_54.fragment){_54.reference="absolute";}else{_54.reference="uri";}}}if(_52.reference&&_52.reference!=="suffix"&&_52.reference!==_54.reference){_54.errors.push("URI is not a "+_52.reference+" reference.");}_55=URI.SCHEMES[_54.scheme||_52.scheme];if(_55&&_55.parse){_55.parse(_54,_52);}}else{_54.errors.push("URI can not be parsed.");}return _54;};URI._recomposeAuthority=function(_56){var _57=[];if(_56.userinfo!==undefined||_56.host!==undefined||typeof _56.port==="number"){if(_56.userinfo!==undefined){_57.push(_56.userinfo.toString().replace(_39,_4a));_57.push("@");}if(_56.host!==undefined){_57.push(_56.host.toString().toLowerCase().replace(_3a,_4a));}if(typeof _56.port==="number"){_57.push(":");_57.push(_56.port.toString(10));}}return _57.length?_57.join(""):undefined;};URI.removeDotSegments=function(_58){var _59=[],s;while(_58.length){if(_58.match(_44)){_58=_58.replace(_44,"");}else{if(_58.match(_45)){_58=_58.replace(_45,"/");}else{if(_58.match(_46)){_58=_58.replace(_46,"/");_59.pop();}else{if(_58==="."||_58===".."){_58="";}else{s=_58.match(_48)[0];_58=_58.slice(s.length);_59.push(s);}}}}}return _59.join("");};URI.serialize=function(_5a,_5b){var _5c=[],_5d,s;_5b=_5b||{};_5d=URI.SCHEMES[_5a.scheme||_5b.scheme];if(_5d&&_5d.serialize){_5d.serialize(_5a,_5b);}if(_5b.reference!=="suffix"&&_5a.scheme){_5c.push(_5a.scheme.toString().toLowerCase().replace(_38,""));_5c.push(":");}_5a.authority=URI._recomposeAuthority(_5a);if(_5a.authority!==undefined){if(_5b.reference!=="suffix"){_5c.push("//");}_5c.push(_5a.authority);if(_5a.path&&_5a.path.charAt(0)!=="/"){_5c.push("/");}}if(_5a.path){s=URI.removeDotSegments(_5a.path.toString().replace(/%2E/ig,"."));if(_5a.scheme){s=s.replace(_3b,_4a);}else{s=s.replace(_3c,_4a);}if(_5a.authority===undefined){s=s.replace(/^\/\//,"/%2F");}_5c.push(s);}if(_5a.query){_5c.push("?");_5c.push(_5a.query.toString().replace(_3d,_4a));}if(_5a.fragment){_5c.push("#");_5c.push(_5a.fragment.toString().replace(_3e,_4a));}return _5c.join("").replace(_42,_4b).replace(/%[0-9A-Fa-f]{2}/g,function(str){return str.toUpperCase();});};URI.resolveComponents=function(_5e,_5f,_60,_61){var _62=new _50();if(!_61){_5e=URI.parse(URI.serialize(_5e,_60),_60);_5f=URI.parse(URI.serialize(_5f,_60),_60);}_60=_60||{};if(!_60.tolerant&&_5f.scheme){_62.scheme=_5f.scheme;_62.authority=_5f.authority;_62.userinfo=_5f.userinfo;_62.host=_5f.host;_62.port=_5f.port;_62.path=URI.removeDotSegments(_5f.path);_62.query=_5f.query;}else{if(_5f.authority!==undefined){_62.authority=_5f.authority;_62.userinfo=_5f.userinfo;_62.host=_5f.host;_62.port=_5f.port;_62.path=URI.removeDotSegments(_5f.path);_62.query=_5f.query;}else{if(!_5f.path){_62.path=_5e.path;if(_5f.query!==undefined){_62.query=_5f.query;}else{_62.query=_5e.query;}}else{if(_5f.path.charAt(0)==="/"){_62.path=URI.removeDotSegments(_5f.path);}else{if(_5e.authority!==undefined&&!_5e.path){_62.path="/"+_5f.path;}else{if(!_5e.path){_62.path=_5f.path;}else{_62.path=_5e.path.slice(0,_5e.path.lastIndexOf("/")+1)+_5f.path;}}_62.path=URI.removeDotSegments(_62.path);}_62.query=_5f.query;}_62.authority=_5e.authority;_62.userinfo=_5e.userinfo;_62.host=_5e.host;_62.port=_5e.port;}_62.scheme=_5e.scheme;}_62.fragment=_5f.fragment;return _62;};URI.resolve=function(_63,_64,_65){return URI.serialize(URI.resolveComponents(URI.parse(_63,_65),URI.parse(_64,_65),_65,true),_65);};URI.normalize=function(uri,_66){if(typeof uri==="string"){return URI.serialize(URI.parse(uri,_66),_66);}else{if(_4f(uri)==="object"){return URI.parse(URI.serialize(uri,_66),_66);}}return uri;};URI.equal=function(_67,_68,_69){if(typeof _67==="string"){_67=URI.serialize(URI.parse(_67,_69),_69);}else{if(_4f(_67)==="object"){_67=URI.serialize(_67,_69);}}if(typeof _68==="string"){_68=URI.serialize(URI.parse(_68,_69),_69);}else{if(_4f(_68)==="object"){_68=URI.serialize(_68,_69);}}return _67===_68;};URI.escapeComponent=function(str){return str&&str.toString().replace(_3f,_4a);};URI.unescapeComponent=function(str){return str&&str.toString().replace(_42,_4d);};exports.Components=_50;exports.URI=URI;exports["URI"]={"SCHEMES":URI.SCHEMES,"parse":URI.parse,"removeDotSegments":URI.removeDotSegments,"serialize":URI.serialize,"resolveComponents":URI.resolveComponents,"resolve":URI.resolve,"normalize":URI.normalize,"equal":URI.equal,"escapeComponent":URI.escapeComponent,"unescapeComponent":URI.unescapeComponent};}());
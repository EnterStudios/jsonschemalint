!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;b="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,b.jsv=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b,c){a("./json-schema-draft-01"),a("./json-schema-draft-02"),a("./json-schema-draft-03")},{"./json-schema-draft-01":2,"./json-schema-draft-02":3,"./json-schema-draft-03":4}],2:[function(a,b,c){!function(){var b,c,d,e,f,g={},h=a("./jsv").JSV;c={string:function(a,b){return"string"===a.getType()},number:function(a,b){return"number"===a.getType()},integer:function(a,b){return"number"===a.getType()&&a.getValue()%1===0},boolean:function(a,b){return"boolean"===a.getType()},object:function(a,b){return"object"===a.getType()},array:function(a,b){return"array"===a.getType()},null:function(a,b){return"null"===a.getType()},any:function(a,b){return!0}},b=new h.Environment,b.setOption("defaultFragmentDelimiter","."),b.setOption("defaultSchemaURI","http://json-schema.org/schema#"),d=b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,default:"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),h.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,i){var j,k,l,m,n,o=h.toArray(b.getAttribute("type"));if("undefined"!==a.getType()&&o&&o.length){for(n=c.getValueOfProperty("typeValidators")||{},j=0,k=o.length;j<k;++j)if(l=o[j],h.isJSONSchema(l)){if(m=h.createObject(d),m.errors=[],m.validated=h.clone(d.validated),0===l.validate(a,m,e,f,i).errors.length)return!0}else{if(n[l]===g[l]||"function"!=typeof n[l])return!0;if(n[l](a,d))return!0}return d.addError(a,b,"type","Instance is not a required type",o),!1}return!0},typeValidators:c},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,default:{},parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):h.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d,e,f,h){var i,j;if("object"===a.getType()){i=b.getAttribute("properties");for(j in i)i[j]!==g[j]&&i[j]&&i[j].validate(a.getProperty(j),d,a,b,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?h.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,g){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalProperties"),"array"===h.typeOf(j))for(k=0,l=i.length;k<l;++k)m=j[k]||n,m!==!1?m.validate(i[k],d,a,b,k):d.addError(a,b,"additionalProperties","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;k<l;++k)m.validate(i[k],d,a,b,k)}},optional:{type:"boolean",optional:!0,default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):("boolean"!==a.getType()||a.getValue()!==!1)&&a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,i){var j,k,l,m;if("object"===a.getType()){j=b.getAttribute("additionalProperties"),k=b.getAttribute("properties")||{},l=a.getProperties();for(m in l)l[m]!==g[m]&&l[m]&&!k[m]&&(h.isJSONSchema(j)?j.validate(l[m],d,a,b,m):j===!1&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,c,d,e,f,g){var i;"undefined"!==a.getType()&&e&&"undefined"!==e.getType()&&(i=b.getAttribute("requires"),"string"==typeof i?"undefined"===e.getProperty(i).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+i+'"',i):h.isJSONSchema(i)&&i.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(a.getValue()<h||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},minItems:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&a.getProperties().length<h&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;try{h=new RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",h.toString())}catch(i){d.addError(a,b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&a.getValue().length<h&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},enum:{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a,b){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;i<j;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,h){var i,j;"string"===a.getType()&&(i=b.getAttribute("format"),j=c.getValueOfProperty("formatValidators"),"string"!=typeof i||j[i]===g[i]||"function"!=typeof j[i]||j[i].call(this,a,d)||d.addError(a,b,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},default:{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maxDecimal"),"number"==typeof h&&(i=a.getValue().toString(10).split(".")[1],i&&i.length>h&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",h)))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a,b){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,i){var j,k,l,m,n=h.toArray(b.getAttribute("disallow"));if("undefined"!==a.getType()&&n&&n.length){for(m=c.getValueOfProperty("typeValidators")||{},j=0,k=n.length;j<k;++j)if(l=n[j],m[l]!==g[l]&&"function"==typeof m[l]&&m[l](a,d))return d.addError(a,b,"disallow","Instance is a disallowed type",n),!1;return!0}return!0},typeValidators:c},extends:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?h.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,c,d,e,f,g){var i,j,k=b.getAttribute("extends");if(k)if(h.isJSONSchema(k))k.validate(a,d,e,f,g);else if("array"===h.typeOf(k))for(i=0,j=k.length;i<j;++i)k[i].validate(a,d,e,f,g)}}},optional:!0,default:{},fragmentResolution:"dot-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,i){var j,k,l,m=b.getPropertyNames(),n=c.getAttribute("properties");for(j in n)n[j]!==g[j]&&n[j].getValueOfProperty("validationRequired")&&h.pushUnique(m,j);for(j=0,k=m.length;j<k;++j)n[m[j]]!==g[m[j]]&&(l=n[m[j]].getValueOfProperty("validator"),"function"==typeof l&&l(a,b,n[m[j]],d,e,f,i))},initializer:function(a){var b,c,d;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===h.typeOf(b)&&(a._uri=h.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),c=a.getAttribute("extends"),h.isJSONSchema(c)&&(d=h.inherits(c,a,!0),a=a._env.createSchema(d,a._schema,a._uri)),a}},!0,"http://json-schema.org/schema#"),e=b.createSchema(h.inherits(d,b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d,e=b.getValueOfProperty("items").$ref,f=b.getEnvironment().findSchema(e),g=f&&f.getValueOfProperty("parser");return c=h.toArray(c),d="function"==typeof g?h.mapArray(a.getProperties(),function(a){return g(a,f)}):h.toArray(a.getValue()),c[0]&&(d=h.filterArray(d,function(a){return a.rel===c[0]})),c[1]&&(d=h.mapArray(d,function(a){var b=c[1],d=a.href;return d=d.replace(/\{(.+)\}/g,function(a,c,d,e){var f;return f="-this"===c?b.getValue():b.getValueOfProperty(c),void 0!==f?String(f):""}),d?h.formatURI(b.resolveURI(d)):d})),d}},fragmentResolution:{type:"string",optional:!0,default:"dot-delimited"},root:{type:"boolean",optional:!0,default:!1},readonly:{type:"boolean",optional:!0,default:!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d,e,f,g){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},d),!0),!0,"http://json-schema.org/hyper-schema#"),b.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#"),f=b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string",default:"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):h.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?h.mapObject(a.getProperties(),function(a,b){var d=c.getProperty(b),e=d&&d.getValueOfProperty("parser");return"function"==typeof e?e(a,d):a.getValue()}):a.getValue()}},e,"http://json-schema.org/links#"),h.registerEnvironment("json-schema-draft-00",b),h.registerEnvironment("json-schema-draft-01",h.createEnvironment("json-schema-draft-00")),h.getDefaultEnvironmentID()||h.setDefaultEnvironmentID("json-schema-draft-01")}()},{"./jsv":5}],3:[function(a,b,c){!function(){var b,c,d,e,f,g={},h=a("./jsv").JSV;c={string:function(a,b){return"string"===a.getType()},number:function(a,b){return"number"===a.getType()},integer:function(a,b){return"number"===a.getType()&&a.getValue()%1===0},boolean:function(a,b){return"boolean"===a.getType()},object:function(a,b){return"object"===a.getType()},array:function(a,b){return"array"===a.getType()},null:function(a,b){return"null"===a.getType()},any:function(a,b){return!0}},b=new h.Environment,b.setOption("defaultFragmentDelimiter","/"),b.setOption("defaultSchemaURI","http://json-schema.org/schema#"),d=b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,default:"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),h.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,i){var j,k,l,m,n,o=h.toArray(b.getAttribute("type"));if("undefined"!==a.getType()&&o&&o.length){for(n=c.getValueOfProperty("typeValidators")||{},j=0,k=o.length;j<k;++j)if(l=o[j],h.isJSONSchema(l)){if(m=h.createObject(d),m.errors=[],m.validated=h.clone(d.validated),0===l.validate(a,m,e,f,i).errors.length)return!0}else{if(n[l]===g[l]||"function"!=typeof n[l])return!0;if(n[l](a,d))return!0}return d.addError(a,b,"type","Instance is not a required type",o),!1}return!0},typeValidators:c},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,default:{},parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):h.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d,e,f,h){var i,j;if("object"===a.getType()){i=b.getAttribute("properties");for(j in i)i[j]!==g[j]&&i[j]&&i[j].validate(a.getProperty(j),d,a,b,j)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?h.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,g){var i,j,k,l,m,n;if("array"===a.getType())if(i=a.getProperties(),j=b.getAttribute("items"),n=b.getAttribute("additionalProperties"),"array"===h.typeOf(j))for(k=0,l=i.length;k<l;++k)m=j[k]||n,m!==!1?m.validate(i[k],d,a,b,k):d.addError(a,b,"additionalProperties","Additional items are not allowed",m);else for(m=j||n,k=0,l=i.length;k<l;++k)m.validate(i[k],d,a,b,k)}},optional:{type:"boolean",optional:!0,default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):("boolean"!==a.getType()||a.getValue()!==!1)&&a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,i){var j,k,l,m;if("object"===a.getType()){j=b.getAttribute("additionalProperties"),k=b.getAttribute("properties")||{},l=a.getProperties();for(m in l)l[m]!==g[m]&&l[m]&&!k[m]&&(h.isJSONSchema(j)?j.validate(l[m],d,a,b,m):j===!1&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",j))}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,c,d,e,f,g){var i;"undefined"!==a.getType()&&e&&"undefined"!==e.getType()&&(i=b.getAttribute("requires"),"string"==typeof i?"undefined"===e.getProperty(i).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+i+'"',i):h.isJSONSchema(i)&&i.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(a.getValue()<h||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},minItems:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&a.getProperties().length<h&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},uniqueItems:{type:"boolean",optional:!0,default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l;if("array"===a.getType()&&b.getAttribute("uniqueItems"))for(h=a.getProperties(),i=0,j=h.length-1;i<j;++i)for(k=i+1,l=h.length;k<l;++k)h[i].equals(h[k])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:i,y:k})}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;try{h=new RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",h.toString())}catch(i){d.addError(a,b,"pattern","Invalid pattern",i)}}},minLength:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&a.getValue().length<h&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},enum:{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a,b){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;i<j;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,h){var i,j;"string"===a.getType()&&(i=b.getAttribute("format"),j=c.getValueOfProperty("formatValidators"),"string"!=typeof i||j[i]===g[i]||"function"!=typeof j[i]||j[i].call(this,a,d)||d.addError(a,b,"format","String is not in the required format",i))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},default:{type:"any",optional:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"number"===a.getType()&&(h=b.getAttribute("divisibleBy"),0===h?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",h):1!==h&&a.getValue()/h%1!==0&&d.addError(a,b,"divisibleBy","Number is not divisible by "+h,h))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a,b){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,i){var j,k,l,m,n=h.toArray(b.getAttribute("disallow"));if("undefined"!==a.getType()&&n&&n.length){for(m=c.getValueOfProperty("typeValidators")||{},j=0,k=n.length;j<k;++j)if(l=n[j],m[l]!==g[l]&&"function"==typeof m[l]&&m[l](a,d))return d.addError(a,b,"disallow","Instance is a disallowed type",n),!1;return!0}return!0},typeValidators:c},extends:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?h.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,c,d,e,f,g){var i,j,k=b.getAttribute("extends");if(k)if(h.isJSONSchema(k))k.validate(a,d,e,f,g);else if("array"===h.typeOf(k))for(i=0,j=k.length;i<j;++i)k[i].validate(a,d,e,f,g)}}},optional:!0,default:{},fragmentResolution:"slash-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,i){var j,k,l,m=b.getPropertyNames(),n=c.getAttribute("properties");for(j in n)n[j]!==g[j]&&n[j].getValueOfProperty("validationRequired")&&h.pushUnique(m,j);for(j=0,k=m.length;j<k;++j)n[m[j]]!==g[m[j]]&&(l=n[m[j]].getValueOfProperty("validator"),"function"==typeof l&&l(a,b,n[m[j]],d,e,f,i))},initializer:function(a){var b,c,d;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===h.typeOf(b)&&(a._uri=h.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),c=a.getAttribute("extends"),h.isJSONSchema(c)&&(d=h.inherits(c,a,!0),a=a._env.createSchema(d,a._schema,a._uri)),a}},!0,"http://json-schema.org/schema#"),e=b.createSchema(h.inherits(d,b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d,e=b.getValueOfProperty("items").$ref,f=b.getEnvironment().findSchema(e),g=f&&f.getValueOfProperty("parser");return c=h.toArray(c),d="function"==typeof g?h.mapArray(a.getProperties(),function(a){return g(a,f)}):h.toArray(a.getValue()),c[0]&&(d=h.filterArray(d,function(a){return a.rel===c[0]})),c[1]&&(d=h.mapArray(d,function(a){var b=c[1],d=a.href;return d=d.replace(/\{(.+)\}/g,function(a,c,d,e){var f;return f="-this"===c?b.getValue():b.getValueOfProperty(c),void 0!==f?String(f):""}),d?h.formatURI(b.resolveURI(d)):d})),d}},fragmentResolution:{type:"string",optional:!0,default:"slash-delimited"},root:{type:"boolean",optional:!0,default:!1},readonly:{type:"boolean",optional:!0,default:!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d,e,f,g){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}]},d),!0),!0,"http://json-schema.org/hyper-schema#"),b.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#"),f=b.createSchema({$schema:"http://json-schema.org/hyper-schema#",id:"http://json-schema.org/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},targetSchema:{$ref:"hyper-schema#",parser:e.getAttribute("parser")},method:{type:"string",default:"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):h.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?h.mapObject(a.getProperties(),function(a,b){var d=c.getProperty(b),e=d&&d.getValueOfProperty("parser");return"function"==typeof e?e(a,d):a.getValue()}):a.getValue()}},e,"http://json-schema.org/links#"),h.registerEnvironment("json-schema-draft-02",b),h.getDefaultEnvironmentID()&&"json-schema-draft-01"!==h.getDefaultEnvironmentID()||h.setDefaultEnvironmentID("json-schema-draft-02")}()},{"./jsv":5}],4:[function(a,b,c){!function(){function b(a,b,c,d){var e,f,g,h,i,j={};if("object"===a.getType()){e=b.getAttribute("patternProperties"),h=a.getProperties();for(f in e)if(e[f]!==C[f]){g=null;try{g=new RegExp(f)}catch(k){c&&c.addError(b,d,"patternProperties","Invalid pattern",f)}if(g)for(i in h)h[i]!==C[i]&&g.test(i)&&(j[i]=j[i]?D.pushUnique(j[i],e[f]):[e[f]])}}return j}var c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C={},D=a("./jsv").JSV;c={string:function(a,b){return"string"===a.getType()},number:function(a,b){return"number"===a.getType()},integer:function(a,b){return"number"===a.getType()&&a.getValue()%1===0},boolean:function(a,b){return"boolean"===a.getType()},object:function(a,b){return"object"===a.getType()},array:function(a,b){return"array"===a.getType()},null:function(a,b){return"null"===a.getType()},any:function(a,b){return!0}},d=new D.Environment,d.setOption("validateReferences",!0),d.setOption("enforceReferences",!1),d.setOption("strict",!1),e={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/schema#",type:"object",properties:{type:{type:["string","array"],items:{type:["string",{$ref:"#"}]},optional:!0,uniqueItems:!0,default:"any",parser:function(a,b){var c;return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?(c=b.getValueOfProperty("parser"),D.mapArray(a.getProperties(),function(a){return c(a,b)})):"any"},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l,m=D.toArray(b.getAttribute("type"));if("undefined"!==a.getType()&&m&&m.length){for(l=c.getValueOfProperty("typeValidators")||{},h=0,i=m.length;h<i;++h)if(j=m[h],D.isJSONSchema(j)){if(k=D.createObject(d),k.errors=[],k.validated=D.clone(d.validated),0===j.validate(a,k,e,f,g).errors.length)return!0}else{if(l[j]===C[j]||"function"!=typeof l[j])return!0;if(l[j](a,d))return!0}return d.addError(a,b,"type","Instance is not a required type",m),!1}return!0},typeValidators:c},properties:{type:"object",additionalProperties:{$ref:"#"},optional:!0,default:{},parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment();return"object"===a.getType()?c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI("#"))):D.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI("#")))}):{}},validator:function(a,b,c,d,e,f,g){var h,i;if("object"===a.getType()){h=b.getAttribute("properties");for(i in h)h[i]!==C[i]&&h[i]&&h[i].validate(a.getProperty(i),d,a,b,i)}}},items:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?D.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l,m;if("array"===a.getType())if(h=a.getProperties(),i=b.getAttribute("items"),m=b.getAttribute("additionalProperties"),"array"===D.typeOf(i))for(j=0,k=h.length;j<k;++j)l=i[j]||m,l!==!1?l.validate(h[j],d,a,b,j):d.addError(a,b,"additionalProperties","Additional items are not allowed",l);else for(l=i||m,j=0,k=h.length;j<k;++j)l.validate(h[j],d,a,b,j)}},optional:{type:"boolean",optional:!0,default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){"undefined"!==a.getType()||b.getAttribute("optional")||d.addError(a,b,"optional","Property is required",!1)},validationRequired:!0},additionalProperties:{type:[{$ref:"#"},"boolean"],optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):("boolean"!==a.getType()||a.getValue()!==!1)&&a.getEnvironment().createEmptySchema()},validator:function(a,b,c,d,e,f,g){var h,i,j,k;if("object"===a.getType()){h=b.getAttribute("additionalProperties"),i=b.getAttribute("properties")||{},j=a.getProperties();for(k in j)j[k]!==C[k]&&j[k]&&i[k]===C[k]&&(D.isJSONSchema(h)?h.validate(j[k],d,a,b,k):h===!1&&d.addError(a,b,"additionalProperties","Additional properties are not allowed",h));
}}},requires:{type:["string",{$ref:"#"}],optional:!0,parser:function(a,b){return"string"===a.getType()?a.getValue():"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0},validator:function(a,b,c,d,e,f,g){var h;"undefined"!==a.getType()&&e&&"undefined"!==e.getType()&&(h=b.getAttribute("requires"),"string"==typeof h?"undefined"===e.getProperty(h).getType()&&d.addError(a,b,"requires",'Property requires sibling property "'+h+'"',h):D.isJSONSchema(h)&&h.validate(e,d))}},minimum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("minimumCanEqual"),"number"==typeof h&&(a.getValue()<h||i===!1&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{type:"number",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!1&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},minimumCanEqual:{type:"boolean",optional:!0,requires:"minimum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},maximumCanEqual:{type:"boolean",optional:!0,requires:"maximum",default:!0,parser:function(a,b){return"boolean"!==a.getType()||a.getValue()}},minItems:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("minItems"),"number"==typeof h&&a.getProperties().length<h&&d.addError(a,b,"minItems","The number of items is less than the required minimum",h))}},maxItems:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"array"===a.getType()&&(h=b.getAttribute("maxItems"),"number"==typeof h&&a.getProperties().length>h&&d.addError(a,b,"maxItems","The number of items is greater than the required maximum",h))}},pattern:{type:"string",optional:!0,format:"regex",parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;try{h=new RegExp(b.getAttribute("pattern")),"string"===a.getType()&&h&&!h.test(a.getValue())&&d.addError(a,b,"pattern","String does not match pattern",h.toString())}catch(i){d.addError(b,c,"pattern","Invalid pattern",b.getValueOfProperty("pattern"))}}},minLength:{type:"integer",optional:!0,minimum:0,default:0,parser:function(a,b){return"number"===a.getType()?a.getValue():0},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("minLength"),"number"==typeof h&&a.getValue().length<h&&d.addError(a,b,"minLength","String is less than the required minimum length",h))}},maxLength:{type:"integer",optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h;"string"===a.getType()&&(h=b.getAttribute("maxLength"),"number"==typeof h&&a.getValue().length>h&&d.addError(a,b,"maxLength","String is greater than the required maximum length",h))}},enum:{type:"array",optional:!0,minItems:1,uniqueItems:!0,parser:function(a,b){if("array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j;if("undefined"!==a.getType()&&(h=b.getAttribute("enum"))){for(i=0,j=h.length;i<j;++i)if(a.equals(h[i]))return!0;d.addError(a,b,"enum","Instance is not one of the possible values",h)}}},title:{type:"string",optional:!0},description:{type:"string",optional:!0},format:{type:"string",optional:!0,parser:function(a,b){if("string"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"string"===a.getType()&&(h=b.getAttribute("format"),i=c.getValueOfProperty("formatValidators"),"string"!=typeof h||i[h]===C[h]||"function"!=typeof i[h]||i[h].call(this,a,d)||d.addError(a,b,"format","String is not in the required format",h))},formatValidators:{}},contentEncoding:{type:"string",optional:!0},default:{type:"any",optional:!0},maxDecimal:{type:"integer",optional:!0,minimum:0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maxDecimal"),"number"==typeof h&&(i=a.getValue().toString(10).split(".")[1],i&&i.length>h&&d.addError(a,b,"maxDecimal","The number of decimal places is greater than the allowed maximum",h)))}},disallow:{type:["string","array"],items:{type:"string"},optional:!0,uniqueItems:!0,parser:function(a,b){if("string"===a.getType()||"array"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l,m=D.toArray(b.getAttribute("disallow"));if("undefined"!==a.getType()&&m&&m.length){for(k=c.getValueOfProperty("typeValidators")||{},h=0,i=m.length;h<i;++h)if(j=m[h],D.isJSONSchema(j)){if(l=D.createObject(d),l.errors=[],l.validated=D.clone(d.validated),0===j.validate(a,l,e,f,g).errors.length)return d.addError(a,b,"disallow","Instance is a disallowed type",m),!1}else if(k[j]!==C[j]&&"function"==typeof k[j]&&k[j](a,d))return d.addError(a,b,"disallow","Instance is a disallowed type",m),!1;return!0}return!0},typeValidators:c},extends:{type:[{$ref:"#"},"array"],items:{$ref:"#"},optional:!0,default:{},parser:function(a,b){return"object"===a.getType()?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):"array"===a.getType()?D.mapArray(a.getProperties(),function(a){return a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#")))}):void 0},validator:function(a,b,c,d,e,f,g){var h,i,j=b.getAttribute("extends");if(j)if(D.isJSONSchema(j))j.validate(a,d,e,f,g);else if("array"===D.typeOf(j))for(h=0,i=j.length;h<i;++h)j[h].validate(a,d,e,f,g)}}},optional:!0,default:{},fragmentResolution:"dot-delimited",parser:function(a,b){if("object"===a.getType())return a.getEnvironment().createSchema(a,b)},validator:function(a,b,c,d,e,f,g){var h,i,j,k=b.getPropertyNames(),l=c.getAttribute("properties"),m=a.getEnvironment().getOption("strict");for(h in l)l[h]!==C[h]&&(l[h].getValueOfProperty("validationRequired")&&D.pushUnique(k,h),m&&l[h].getValueOfProperty("deprecated")&&D.popFirst(k,h));for(h=0,i=k.length;h<i;++h)l[k[h]]!==C[k[h]]&&(j=l[k[h]].getValueOfProperty("validator"),"function"==typeof j&&j(a,b,l[k[h]],d,e,f,g))}},f={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/hyper-schema#",properties:{links:{type:"array",items:{$ref:"links#"},optional:!0,parser:function(a,b,c){var d,e,f=b.getValueOfProperty("items").$ref,g=b.getEnvironment().findSchema(f),h=g&&g.getValueOfProperty("parser");return c=D.toArray(c),d="function"==typeof h?D.mapArray(a.getProperties(),function(a){return h(a,g)}):D.toArray(a.getValue()),c[0]&&(d=D.filterArray(d,function(a){return a.rel===c[0]})),c[1]&&(e=b.getValueOfProperty("selfReferenceVariable"),d=D.mapArray(d,function(a){var b=c[1],d=a.href;return d=d.replace(/\{(.+)\}/g,function(a,c,d,f){var g;return g=c===e?b.getValue():b.getValueOfProperty(c),void 0!==g?String(g):""}),d?D.formatURI(b.resolveURI(d)):d})),d},selfReferenceVariable:"-this"},fragmentResolution:{type:"string",optional:!0,default:"dot-delimited"},root:{type:"boolean",optional:!0,default:!1},readonly:{type:"boolean",optional:!0,default:!1},pathStart:{type:"string",optional:!0,format:"uri",validator:function(a,b,c,d,e,f,g){var h;"undefined"!==a.getType()&&(h=b.getAttribute("pathStart"),"string"==typeof h&&0!==a.getURI().indexOf(h)&&d.addError(a,b,"pathStart","Instance's URI does not start with "+h,h))}},mediaType:{type:"string",optional:!0,format:"media-type"},alternate:{type:"array",items:{$ref:"#"},optional:!0}},links:[{href:"{$ref}",rel:"full"},{href:"{$schema}",rel:"describedby"},{href:"{id}",rel:"self"}],initializer:function(a){var b,c,d;return b=a._schema.getLink("describedby",a),b&&a._schema._uri!==b&&a.setReference("describedby",b),b=a._schema.getLink("self",a),"string"===D.typeOf(b)&&(a._uri=D.formatURI(b)),b=a._schema.getLink("full",a),b&&a._uri!==b&&a.setReference("full",b),c=a.getAttribute("extends"),D.isJSONSchema(c)&&(d=D.inherits(c,a,!0),a=a._env.createSchema(d,a._schema,a._uri)),a}},g={$schema:"http://json-schema.org/draft-00/hyper-schema#",id:"http://json-schema.org/draft-00/links#",type:"object",properties:{href:{type:"string"},rel:{type:"string"},method:{type:"string",default:"GET",optional:!0},enctype:{type:"string",requires:"method",optional:!0},properties:{type:"object",additionalProperties:{$ref:"hyper-schema#"},optional:!0,parser:function(a,b,c){var d=a.getEnvironment(),e=b.getEnvironment(),f=b.getValueOfProperty("additionalProperties").$ref;if("object"===a.getType())return c?d.createSchema(a.getProperty(c),e.findSchema(b.resolveURI(f))):D.mapObject(a.getProperties(),function(a){return d.createSchema(a,e.findSchema(b.resolveURI(f)))})}}},parser:function(a,b){var c=b.getProperty("properties");return"object"===a.getType()?D.mapObject(a.getProperties(),function(a,b){var d=c.getProperty(b),e=d&&d.getValueOfProperty("parser");return"function"==typeof e?e(a,d):a.getValue()}):a.getValue()}},d.setOption("defaultFragmentDelimiter","."),d.setOption("defaultSchemaURI","http://json-schema.org/draft-00/schema#"),h=d.createSchema(e,!0,"http://json-schema.org/draft-00/schema#"),i=d.createSchema(D.inherits(h,d.createSchema(f,!0,"http://json-schema.org/draft-00/hyper-schema#"),!0),!0,"http://json-schema.org/draft-00/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/draft-00/hyper-schema#"),j=d.createSchema(g,i,"http://json-schema.org/draft-00/links#"),k=D.inherits(e,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/schema#"}),l=D.inherits(f,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/hyper-schema#"}),m=D.inherits(g,{$schema:"http://json-schema.org/draft-01/hyper-schema#",id:"http://json-schema.org/draft-01/links#"}),d.setOption("defaultSchemaURI","http://json-schema.org/draft-01/schema#"),n=d.createSchema(k,!0,"http://json-schema.org/draft-01/schema#"),o=d.createSchema(D.inherits(n,d.createSchema(l,!0,"http://json-schema.org/draft-01/hyper-schema#"),!0),!0,"http://json-schema.org/draft-01/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/draft-01/hyper-schema#"),p=d.createSchema(m,o,"http://json-schema.org/draft-01/links#"),q=D.inherits(k,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/schema#",properties:{uniqueItems:{type:"boolean",optional:!0,default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l;if("array"===a.getType()&&b.getAttribute("uniqueItems"))for(h=a.getProperties(),i=0,j=h.length-1;i<j;++i)for(k=i+1,l=h.length;k<l;++k)h[i].equals(h[k])&&d.addError(a,b,"uniqueItems","Array can only contain unique items",{x:i,y:k})}},maxDecimal:{deprecated:!0},divisibleBy:{type:"number",minimum:0,minimumCanEqual:!1,optional:!0,parser:function(a,b){if("number"===a.getType())return a.getValue()},validator:function(a,b,c,d,e,f,g){var h,i,j;"number"===a.getType()&&(h=b.getAttribute("divisibleBy"),0===h?d.addError(a,b,"divisibleBy","Nothing is divisible by 0",h):1!==h&&(i=a.getValue(),j=Math.max((i.toString().split(".")[1]||" ").length,(h.toString().split(".")[1]||" ").length),j=parseFloat((i/h%1).toFixed(j)),0<j&&j<1&&d.addError(a,b,"divisibleBy","Number is not divisible by "+h,h)))}}},fragmentResolution:"slash-delimited"}),r=D.inherits(l,{id:"http://json-schema.org/draft-02/hyper-schema#",properties:{fragmentResolution:{default:"slash-delimited"}}}),s=D.inherits(m,{$schema:"http://json-schema.org/draft-02/hyper-schema#",id:"http://json-schema.org/draft-02/links#",properties:{targetSchema:{$ref:"hyper-schema#",parser:o.getAttribute("parser")}}}),d.setOption("defaultFragmentDelimiter","/"),d.setOption("defaultSchemaURI","http://json-schema.org/draft-02/schema#"),t=d.createSchema(q,!0,"http://json-schema.org/draft-02/schema#"),u=d.createSchema(D.inherits(t,d.createSchema(r,!0,"http://json-schema.org/draft-02/hyper-schema#"),!0),!0,"http://json-schema.org/draft-02/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/draft-02/hyper-schema#"),v=d.createSchema(s,u,"http://json-schema.org/draft-02/links#"),w=D.inherits(q,{$schema:"http://json-schema.org/draft-03/schema#",id:"http://json-schema.org/draft-03/schema#",properties:{patternProperties:{type:"object",additionalProperties:{$ref:"#"},default:{},parser:t.getValueOfProperty("properties").properties.parser,validator:function(a,c,d,e,f,g,h){var i,j,k;if("object"===a.getType()){i=b(a,c,e,d);for(j in i)if(i[j]!==C[j])for(k=i[j].length;k--;)i[j][k].validate(a.getProperty(j),e,a,c,j)}}},additionalProperties:{validator:function(a,c,d,e,f,g,h){var i,j,k,l,m;if("object"===a.getType()){i=c.getAttribute("additionalProperties"),j=c.getAttribute("properties")||{},k=a.getProperties(),l=b(a,c);for(m in k)k[m]!==C[m]&&k[m]&&j[m]===C[m]&&l[m]===C[m]&&(D.isJSONSchema(i)?i.validate(k[m],e,a,c,m):i===!1&&e.addError(a,c,"additionalProperties","Additional properties are not allowed",i))}}},items:{validator:function(a,b,c,d,e,f,g){var h,i,j,k,l,m;if("array"===a.getType())if(h=a.getProperties(),i=b.getAttribute("items"),m=b.getAttribute("additionalItems"),"array"===D.typeOf(i))for(j=0,k=h.length;j<k;++j)l=i[j]||m,l!==!1?l.validate(h[j],d,a,b,j):d.addError(a,b,"additionalItems","Additional items are not allowed",l);else for(l=i||m,j=0,k=h.length;j<k;++j)l.validate(h[j],d,a,b,j)}},additionalItems:{type:[{$ref:"#"},"boolean"],default:{},parser:t.getValueOfProperty("properties").additionalProperties.parser,validator:function(a,b,c,d,e,f,g){var h,i,j,k;if("array"===a.getType()&&"undefined"===b.getProperty("items").getType())if(h=b.getAttribute("additionalItems"),i=a.getProperties(),h!==!1)for(j=0,k=i.length;j<k;++j)h.validate(i[j],d,a,b,j);else i.length&&d.addError(a,b,"additionalItems","Additional items are not allowed",h)}},optional:{validationRequired:!1,deprecated:!0},required:{type:"boolean",default:!1,parser:function(a,b){return!!a.getValue()},validator:function(a,b,c,d,e,f,g){"undefined"===a.getType()&&b.getAttribute("required")&&d.addError(a,b,"required","Property is required",!0)}},requires:{deprecated:!0},dependencies:{type:"object",additionalProperties:{type:["string","array",{$ref:"#"}],items:{type:"string"}},default:{},parser:function(a,b,c){function d(a){var c=a.getType();return"string"===c||"array"===c?a.getValue():"object"===c?a.getEnvironment().createSchema(a,b.getEnvironment().findSchema(b.resolveURI("#"))):void 0}return"object"===a.getType()?c?d(a.getProperty(c)):D.mapObject(a.getProperties(),d):{}},validator:function(a,b,c,d,e,f,g){var h,i,j,k,l,m;if("object"===a.getType()){h=b.getAttribute("dependencies");for(i in h)if(h[i]!==C[i]&&"undefined"!==a.getProperty(i).getType())if(j=h[i],k=D.typeOf(j),"string"===k)"undefined"===a.getProperty(j).getType()&&d.addError(a,b,"dependencies",'Property "'+i+'" requires sibling property "'+j+'"',h);else if("array"===k)for(l=0,m=j.length;l<m;++l)"undefined"===a.getProperty(j[l]).getType()&&d.addError(a,b,"dependencies",'Property "'+i+'" requires sibling property "'+j[l]+'"',h);else D.isJSONSchema(j)&&j.validate(a,d)}}},minimumCanEqual:{deprecated:!0},maximumCanEqual:{deprecated:!0},exclusiveMinimum:{type:"boolean",default:!1,parser:function(a,b){return!!a.getValue()}},exclusiveMaximum:{type:"boolean",default:!1,parser:function(a,b){return!!a.getValue()}},minimum:{validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("minimum"),i=b.getAttribute("exclusiveMinimum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("minimumCanEqual"),"number"==typeof h&&(a.getValue()<h||i===!0&&a.getValue()===h)&&d.addError(a,b,"minimum","Number is less than the required minimum value",h))}},maximum:{validator:function(a,b,c,d,e,f,g){var h,i;"number"===a.getType()&&(h=b.getAttribute("maximum"),i=b.getAttribute("exclusiveMaximum")||!a.getEnvironment().getOption("strict")&&!b.getAttribute("maximumCanEqual"),"number"==typeof h&&(a.getValue()>h||i===!0&&a.getValue()===h)&&d.addError(a,b,"maximum","Number is greater than the required maximum value",h))}},contentEncoding:{deprecated:!0},divisibleBy:{exclusiveMinimum:!0},disallow:{items:{type:["string",{$ref:"#"}]},parser:q.properties.type.parser},id:{type:"string",format:"uri"},$ref:{type:"string",format:"uri"},$schema:{type:"string",format:"uri"}},dependencies:{exclusiveMinimum:"minimum",exclusiveMaximum:"maximum"},initializer:function(a){var b,c,d,e=a.getValueOfProperty("$schema"),f=a.getValueOfProperty("$ref"),g=a.getValueOfProperty("id");return e&&(b=a.resolveURI(e),a.setReference("describedby",b)),g&&(b=a.resolveURI(g),"string"===D.typeOf(b)&&(a._uri=D.formatURI(b))),f&&(b=a.resolveURI(f),a.setReference("full",b)),c=a.getAttribute("extends"),D.isJSONSchema(c)&&(d=D.inherits(c,a,!0),a=a._env.createSchema(d,a._schema,a._uri)),a}}),x=D.inherits(r,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/hyper-schema#",properties:{links:{selfReferenceVariable:"@"},root:{deprecated:!0},contentEncoding:{deprecated:!1},alternate:{deprecated:!0}}}),y=D.inherits(s,{$schema:"http://json-schema.org/draft-03/hyper-schema#",id:"http://json-schema.org/draft-03/links#",properties:{href:{required:!0,format:"link-description-object-template"},rel:{required:!0},properties:{deprecated:!0},schema:{$ref:"http://json-schema.org/draft-03/hyper-schema#"}}}),d.setOption("defaultSchemaURI","http://json-schema.org/draft-03/schema#"),z=d.createSchema(w,!0,"http://json-schema.org/draft-03/schema#"),A=d.createSchema(D.inherits(z,d.createSchema(x,!0,"http://json-schema.org/draft-03/hyper-schema#"),!0),!0,"http://json-schema.org/draft-03/hyper-schema#"),d.setOption("defaultSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),B=d.createSchema(y,!0,"http://json-schema.org/draft-03/links#"),d.setOption("latestJSONSchemaSchemaURI","http://json-schema.org/draft-03/schema#"),d.setOption("latestJSONSchemaHyperSchemaURI","http://json-schema.org/draft-03/hyper-schema#"),d.setOption("latestJSONSchemaLinksURI","http://json-schema.org/draft-03/links#"),d._schemas["http://json-schema.org/schema#"]=z,d._schemas["http://json-schema.org/hyper-schema#"]=A,d._schemas["http://json-schema.org/links#"]=B,D.registerEnvironment("json-schema-draft-03",d),D.getDefaultEnvironmentID()&&"json-schema-draft-01"!==D.getDefaultEnvironmentID()&&"json-schema-draft-02"!==D.getDefaultEnvironmentID()||D.setDefaultEnvironmentID("json-schema-draft-03")}()},{"./jsv":5}],5:[function(a,b,c){var c=c||this,a=a||function(){return c};!function(){function b(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()}function d(){}function e(a){return d.prototype=a||{},new d}function f(a,b,c){var d,e={};for(d in a)a[d]!==B[d]&&(e[d]=b.call(c,a[d],d,a));return e}function g(a){return void 0!==a&&null!==a?a instanceof Array&&!a.callee?a:"number"!=typeof a.length||a.split||a.setInterval||a.call?[a]:Array.prototype.slice.call(a):[]}function h(a){var c,d=[];switch(b(a)){case"object":for(c in a)a[c]!==B[c]&&(d[d.length]=c);break;case"array":for(c=a.length-1;c>=0;--c)d[c]=c}return d}function i(a,b){return y(a,b)===-1&&a.push(b),a}function j(a,b){var c=y(a,b);return c>-1&&a.splice(c,1),a}function k(){return[C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],"-",C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],"-4",C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],"-",C[3&Math.floor(16*Math.random())|8],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],"-",C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())],C[Math.floor(16*Math.random())]].join("")}function l(a){return encodeURIComponent(a).replace(/!/g,"%21").replace(/'/g,"%27").replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/\*/g,"%2A")}function m(a){return"string"==typeof a&&a.indexOf("#")===-1&&(a+="#"),a}function n(a){if(a instanceof q)return a.getURI();switch(b(a)){case"undefined":case"null":case"boolean":case"number":case"string":return a;case"object":return f(a,n);case"array":return w(a,n);default:return a.toString()}}function o(a,b,c,d,e){Error.call(this,d),this.uri=a instanceof q?a.getURI():a,this.schemaUri=b instanceof q?b.getURI():b,this.attribute=c,this.message=d,this.description=d,this.details=e}function p(){this.errors=[],this.validated={}}function q(a,b,c,d){b instanceof q&&("string"!=typeof d&&(d=b._fd),"string"!=typeof c&&(c=b._uri),b=b._value),"string"!=typeof c?c="urn:uuid:"+k()+"#":c.indexOf(":")===-1&&(c=m(A.resolve("urn:uuid:"+k()+"#",c))),this._env=a,this._value=b,this._uri=c,this._fd=d||this._env._options.defaultFragmentDelimiter}function r(a,c){var d,f;switch(a instanceof q&&(a=a.getValue()),b(a)){case"object":if(c){d={};for(f in a)a[f]!==B[f]&&(d[f]=r(a[f],c));return d}return e(a);case"array":if(c){for(d=new Array(a.length),f=a.length;--f>=0;)d[f]=r(a[f],c);return d}return Array.prototype.slice.call(a);default:return a}}function s(a,b,c,d){var e;return q.call(this,a,b,c),d===!0?this._schema=this:b instanceof s&&!(d instanceof s)?this._schema=b._schema:this._schema=d instanceof s?d:this._env.getDefaultSchema()||this._env.createEmptySchema(),e=this._schema.getValueOfProperty("fragmentResolution"),"dot-delimited"===e?this._fd=".":"slash-delimited"===e&&(this._fd="/"),this.rebuild()}function t(a){return function(){for(var b,c=this,d=[],e=c._refs&&c._refs.full;e;)if(b=c._env.findSchema(e)){if(b._value===c._value)break;if(c=b,d.push(e),e=c._refs&&c._refs.full,d.indexOf(e)>-1)break}else{if(c._env._options.enforceReferences)throw new o(c,c._schema,"{full}","Unknown schema reference",e);e=null}return a.apply(c,arguments)}}function u(a,c,d){var e,f,g=b(a),h=b(c);if("undefined"===h)return r(a,!0);if("undefined"===g||h!==g)return r(c,!0);if("object"===h){a instanceof s&&(a=a.getAttributes()),c instanceof s&&(c=c.getAttributes(),c.extends&&d&&c.extends instanceof s&&(c.extends=[c.extends])),e=r(a,!0);for(f in c)c[f]!==B[f]&&(e[f]=u(a[f],c[f],d));return e}return r(c,!0)}function v(){this._id=k(),this._schemas={},this._options={},this.createSchema({},!0,"urn:jsv:empty-schema#")}var w,x,y,z,A=a("./uri/uri").URI,B={},C="0123456789abcdef".split("");w=function(a,b,c){for(var d=0,e=a.length,f=new Array(e);d<e;++d)f[d]=b.call(c,a[d],d,a);return f},Array.prototype.map&&(w=function(a,b,c){return Array.prototype.map.call(a,b,c)}),x=function(a,b,c){for(var d=0,e=a.length,f=[];d<e;++d)b.call(c,a[d],d,a)&&(f[f.length]=a[d]);return f},Array.prototype.filter&&(x=function(a,b,c){return Array.prototype.filter.call(a,b,c)}),y=function(a,b){for(var c=0,d=a.length;c<d;++c)if(a[c]===b)return c;return-1},Array.prototype.indexOf&&(y=function(a,b){return Array.prototype.indexOf.call(a,b)}),o.prototype=new Error,o.prototype.constructor=o,o.prototype.name="InitializationError",p.prototype.addError=function(a,b,c,d,e){this.errors.push({uri:a instanceof q?a.getURI():a,schemaUri:b instanceof q?b.getURI():b,attribute:c,message:d,details:n(e)})},p.prototype.registerValidation=function(a,b){this.validated[a]?this.validated[a].push(b):this.validated[a]=[b]},p.prototype.isValidatedBy=function(a,b){return!!this.validated[a]&&y(this.validated[a],b)!==-1},q.prototype.getEnvironment=function(){return this._env},q.prototype.getType=function(){return b(this._value)},q.prototype.getValue=function(){return this._value},q.prototype.getURI=function(){return this._uri},q.prototype.resolveURI=function(a){return m(A.resolve(this._uri,a))},q.prototype.getPropertyNames=function(){return h(this._value)},q.prototype.getProperty=function(a){var b=this._value?this._value[a]:void 0;return b instanceof q?b:new q(this._env,b,this._uri+this._fd+l(a),this._fd)},q.prototype.getProperties=function(){var a=b(this._value),c=this;return"object"===a?f(this._value,function(a,b){return a instanceof q?a:new q(c._env,a,c._uri+c._fd+l(b),c._fd)}):"array"===a?w(this._value,function(a,b){return a instanceof q?a:new q(c._env,a,c._uri+c._fd+l(b),c._fd)}):void 0},q.prototype.getValueOfProperty=function(a){if(this._value)return this._value[a]instanceof q?this._value[a]._value:this._value[a]},q.prototype.equals=function(a){return a instanceof q?this._value===a._value:this._value===a},s.prototype=e(q.prototype),s.prototype.getSchema=function(){var a,b=this._refs&&this._refs.describedby;if(b)if(a=b&&this._env.findSchema(b))a.equals(this._schema)||(this._schema=a,this.rebuild());else if(this._env._options.enforceReferences)throw new o(this,this._schema,"{describedby}","Unknown schema reference",b);return this._schema},s.prototype.getAttribute=function(a,b){var c,d,e,f,g=this.getSchema();return!b&&this._attributes&&this._attributes.hasOwnProperty(a)?this._attributes[a]:(c=g.getProperty("properties").getProperty(a),d=c.getValueOfProperty("parser"),e=this.getProperty(a),"function"==typeof d?(f=d(e,c,b),!b&&this._attributes&&(this._attributes[a]=f),f):e.getValue())},s.prototype.getAttributes=function(){var a,b,c,d,e,f=this.getSchema();if(!this._attributes&&"object"===this.getType()){a=this.getProperties(),b=f.getProperty("properties"),this._attributes={};for(c in a)a[c]!==B[c]&&(d=b&&b.getProperty(c),e=d&&d.getValueOfProperty("parser"),"function"==typeof e?this._attributes[c]=e(a[c],d):this._attributes[c]=a[c].getValue())}return r(this._attributes,!1)},s.prototype.getLink=function(a,b){var c=this.getAttribute("links",[a,b]);if(c&&c.length&&c[c.length-1])return c[c.length-1]},s.prototype.validate=function(a,b,c,d,e){var f=this.getSchema(),g=f.getValueOfProperty("validator");return a instanceof q||(a=this.getEnvironment().createInstance(a)),b instanceof p||(b=new p),this._env._options.validateReferences&&this._refs&&(this._refs.describedby&&!this._env.findSchema(this._refs.describedby)&&b.addError(this,this._schema,"{describedby}","Unknown schema reference",this._refs.describedby),this._refs.full&&!this._env.findSchema(this._refs.full)&&b.addError(this,this._schema,"{full}","Unknown schema reference",this._refs.full)),"function"!=typeof g||b.isValidatedBy(a.getURI(),this.getURI())||(b.registerValidation(a.getURI(),this.getURI()),g(a,this,f,b,c,d,e)),b},function(){var a;for(a in s.prototype)s.prototype[a]!==B[a]&&"function"===b(s.prototype[a])&&(s.prototype[a]=t(s.prototype[a]))}(),s.prototype.rebuild=function(){var a=this,b=a.getSchema().getValueOfProperty("initializer");return a._refs=null,a._attributes=null,"function"==typeof b&&(a=b(a)),a._env._schemas[a._uri]=a,a.getAttributes(),a},s.prototype.setReference=function(a,b){this._refs||(this._refs={}),this._refs[a]=this.resolveURI(b)},s.prototype.getReference=function(a){return this._refs&&this._refs[a]},v.prototype.clone=function(){var a=new v;return a._schemas=e(this._schemas),a._options=e(this._options),a},v.prototype.createInstance=function(a,b){return b=m(b),a instanceof q&&(!b||a.getURI()===b)?a:new q(this,a,b)},v.prototype.createSchema=function(a,b,c){return c=m(c),!(a instanceof s)||c&&a._uri!==c||b&&!a.getSchema().equals(b)?new s(this,a,c,b):a},v.prototype.createEmptySchema=function(){return this._schemas["urn:jsv:empty-schema#"]},v.prototype.findSchema=function(a){return this._schemas[m(a)]},v.prototype.setOption=function(a,b){this._options[a]=b},v.prototype.getOption=function(a){return this._options[a]},v.prototype.setDefaultFragmentDelimiter=function(a){"string"==typeof a&&a.length>0&&(this._options.defaultFragmentDelimiter=a)},v.prototype.getDefaultFragmentDelimiter=function(){return this._options.defaultFragmentDelimiter},v.prototype.setDefaultSchemaURI=function(a){"string"==typeof a&&(this._options.defaultSchemaURI=m(a))},v.prototype.getDefaultSchema=function(){return this.findSchema(this._options.defaultSchemaURI)},v.prototype.validate=function(a,b){var c,d,e,f=new p;try{c=this.createInstance(a),f.instance=c}catch(g){f.addError(g.uri,g.schemaUri,g.attribute,g.message,g.details)}try{d=this.createSchema(b),f.schema=d,e=d.getSchema(),f.schemaSchema=e}catch(h){f.addError(h.uri,h.schemaUri,h.attribute,h.message,h.details)}return e&&e.validate(d,f),f.errors.length?f:d.validate(c,f)},v.prototype._checkForInvalidInstances=function(a,c){for(var d,e,f,g,h,i=[],j=[[c,this._schemas[c]]],k=0;k++<a&&j.length;)if(d=j.shift(),e=d[0],f=d[1],f instanceof s)if(this._schemas[f._uri]!==f)i.push("Instance "+e+" does not match "+f._uri);else{g=f.getAttributes();for(h in g)g[h]!==B[h]&&j.push([e+"/"+l(h),g[h]])}else if("object"===b(f)){g=f;for(h in g)g.hasOwnProperty(h)&&j.push([e+"/"+l(h),g[h]])}else if("array"===b(f))for(g=f,h=0;h<g.length;++h)j.push([e+"/"+l(h),g[h]]);return i.length?i:k},z={_environments:{},_defaultEnvironmentID:"",isJSONInstance:function(a){return a instanceof q},isJSONSchema:function(a){return a instanceof s},createEnvironment:function(a){if(a=a||this._defaultEnvironmentID,!this._environments[a])throw new Error("Unknown Environment ID");return this._environments[a].clone()},Environment:v,registerEnvironment:function(a,b){a=a||(b||0)._id,a&&!this._environments[a]&&b instanceof v&&(b._id=a,this._environments[a]=b)},setDefaultEnvironmentID:function(a){if("string"==typeof a){if(!this._environments[a])throw new Error("Unknown Environment ID");this._defaultEnvironmentID=a}},getDefaultEnvironmentID:function(){return this._defaultEnvironmentID},typeOf:b,createObject:e,mapObject:f,mapArray:w,filterArray:x,searchArray:y,toArray:g,keys:h,pushUnique:i,popFirst:j,clone:r,randomUUID:k,escapeURIComponent:l,formatURI:m,inherits:u,InitializationError:o},this.JSV=z,c.JSV=z,a("./environments")}()},{"./environments":1,"./uri/uri":6}],6:[function(a,b,c){"undefined"==typeof c&&(c={}),"function"!=typeof a&&(a=function(a){return c}),function(){var a=function(a){for(var b=arguments[0],c=1,d=arguments[c];d;)b=b.slice(0,-1)+d.slice(1),d=arguments[++c];return b},b=function(a){return"(?:"+a+")"},d="[A-Za-z]",e="[0-9]",f=a(e,"[A-Fa-f]"),g=b("%"+f+f),h="[\\:\\/\\?\\#\\[\\]\\@]",i="[\\!\\$\\&\\'\\(\\)\\*\\+\\,\\;\\=]",j=a(h,i),k=a(d,e,"[\\-\\.\\_\\~]"),l=b(d+a(d,e,"[\\+\\-\\.]")+"*"),m=b(b(g+"|"+a(k,i,"[\\:]"))+"*"),n=b(b("25[0-5]")+"|"+b("2[0-4]"+e)+"|"+b("1"+e+e)+"|"+b("[1-9]"+e)+"|"+e),o=b(n+"\\."+n+"\\."+n+"\\."+n),p=b(f+"{1,4}"),q=(b(b(p+"\\:"+p)+"|"+o),b(a(k,i,"[\\:]")+"+")),r=b("v"+f+"+\\."+a(k,i,"[\\:]")+"+"),s=b("\\["+b(q+"|"+r)+"\\]"),t=b(b(g+"|"+a(k,i))+"*"),u=b(s+"|"+o+"|"+t),v=b(e+"*"),w=b(b(m+"@")+"?"+u+b("\\:"+v)+"?"),x=b(g+"|"+a(k,i,"[\\:\\@]")),y=b(x+"*"),z=b(x+"+"),A=b(b(g+"|"+a(k,i,"[\\@]"))+"+"),B=b(b("\\/"+y)+"*"),C=b("\\/"+b(z+B)+"?"),D=b(A+B),E=b(z+B),F=b(""),G=(b(B+"|"+C+"|"+D+"|"+E+"|"+F),b(b(x+"|[\\/\\?]")+"*")),H=b(b(x+"|[\\/\\?]")+"*"),I=b(b("\\/\\/"+w+B)+"|"+C+"|"+E+"|"+F),J=b(l+"\\:"+I+b("\\?"+G)+"?"+b("\\#"+H)+"?"),K=b(b("\\/\\/"+w+B)+"|"+C+"|"+D+"|"+F),L=b(K+b("\\?"+G)+"?"+b("\\#"+H)+"?"),M=(b(J+"|"+L),b(l+"\\:"+I+b("\\?"+G)+"?"),new RegExp("^"+b("("+J+")|("+L+")")+"$")),N=new RegExp("^("+l+")\\:"+b(b("\\/\\/("+b("("+m+")@")+"?("+u+")"+b("\\:("+v+")")+"?)")+"?("+B+"|"+C+"|"+E+"|"+F+")")+b("\\?("+G+")")+"?"+b("\\#("+H+")")+"?$"),O=new RegExp("^(){0}"+b(b("\\/\\/("+b("("+m+")@")+"?("+u+")"+b("\\:("+v+")")+"?)")+"?("+B+"|"+C+"|"+D+"|"+F+")")+b("\\?("+G+")")+"?"+b("\\#("+H+")")+"?$"),P=(new RegExp("^("+l+")\\:"+b(b("\\/\\/("+b("("+m+")@")+"?("+u+")"+b("\\:("+v+")")+"?)")+"?("+B+"|"+C+"|"+E+"|"+F+")")+b("\\?("+G+")")+"?$"),
new RegExp("^"+b("\\#("+H+")")+"?$"),new RegExp("^"+b("("+m+")@")+"?("+u+")"+b("\\:("+v+")")+"?$"),new RegExp(a("[^]",d,e,"[\\+\\-\\.]"),"g")),Q=new RegExp(a("[^\\%\\:]",k,i),"g"),R=new RegExp(a("[^\\%]",k,i),"g"),S=new RegExp(a("[^\\%\\/\\:\\@]",k,i),"g"),T=new RegExp(a("[^\\%\\/\\@]",k,i),"g"),U=new RegExp(a("[^\\%]",k,i,"[\\:\\@\\/\\?]"),"g"),V=U,W=new RegExp(a("[^]",k,i),"g"),X=new RegExp(k,"g"),Y=(new RegExp(a("[^\\%]",k,j),"g"),new RegExp(g+"+","g")),Z=/^(?:([^:\/?#]+):)?(?:\/\/((?:([^\/?#@]*)@)?([^\/?#:]*)(?:\:(\d*))?))?([^?#]*)(?:\?([^#]*))?(?:#(.*))?/i,$=/^\.\.?\//,_=/^\/\.(\/|$)/,aa=/^\/\.\.(\/|$)/,ba=/^\/?.*?(?=\/|$)/,ca=void 0==="".match(/(){0}/)[1],da=function(a){var b=a.charCodeAt(0);return b<128?"%"+b.toString(16).toUpperCase():b>127&&b<2048?"%"+(b>>6|192).toString(16).toUpperCase()+"%"+(63&b|128).toString(16).toUpperCase():"%"+(b>>12|224).toString(16).toUpperCase()+"%"+(b>>6&63|128).toString(16).toUpperCase()+"%"+(63&b|128).toString(16).toUpperCase()},ea=function(a){for(var b,c,d="",e=0;e<a.length;)b=parseInt(a.substr(e+1,2),16),b<128?(c=String.fromCharCode(b),d+=c.match(X)?c:a.substr(e,3),e+=3):b>191&&b<224?(d+=a.substr(e,6),e+=6):(d+=a.substr(e,9),e+=9);return d},fa=function(a){for(var b,c,d,e="",f=0;f<a.length;)b=parseInt(a.substr(f+1,2),16),b<128?(e+=String.fromCharCode(b),f+=3):b>191&&b<224?(c=parseInt(a.substr(f+4,2),16),e+=String.fromCharCode((31&b)<<6|63&c),f+=6):(c=parseInt(a.substr(f+4,2),16),d=parseInt(a.substr(f+7,2),16),e+=String.fromCharCode((15&b)<<12|(63&c)<<6|63&d),f+=9);return e},ga=function(a){return void 0===a?"undefined":null===a?"null":Object.prototype.toString.call(a).split(" ").pop().split("]").shift().toLowerCase()},ha=function(){this.errors=[]},ia=c;ha.prototype={scheme:void 0,authority:void 0,userinfo:void 0,host:void 0,port:void 0,path:void 0,query:void 0,fragment:void 0,reference:void 0,errors:void 0},ia.SCHEMES={},ia.parse=function(a,b){var c,d,e=new ha;return a=a?a.toString():"",b=b||{},"suffix"===b.reference&&(a=(b.scheme?b.scheme+":":"")+"//"+a),c=a.match(M),c&&(c=c[1]?a.match(N):a.match(O)),c||(b.tolerant||e.errors.push("URI is not strictly valid."),c=a.match(Z)),c?(ca?(e.scheme=c[1],e.authority=c[2],e.userinfo=c[3],e.host=c[4],e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=c[7],e.fragment=c[8],isNaN(e.port)&&(e.port=c[5])):(e.scheme=c[1]||void 0,e.authority=a.indexOf("//")!==-1?c[2]:void 0,e.userinfo=a.indexOf("@")!==-1?c[3]:void 0,e.host=a.indexOf("//")!==-1?c[4]:void 0,e.port=parseInt(c[5],10),e.path=c[6]||"",e.query=a.indexOf("?")!==-1?c[7]:void 0,e.fragment=a.indexOf("#")!==-1?c[8]:void 0,isNaN(e.port)&&(e.port=a.match(/\/\/.*\:(?:\/|\?|\#|$)/)?c[4]:void 0)),e.scheme||e.authority||e.path||e.query?e.scheme?e.fragment?e.reference="uri":e.reference="absolute":e.reference="relative":e.reference="same-document",b.reference&&"suffix"!==b.reference&&b.reference!==e.reference&&e.errors.push("URI is not a "+b.reference+" reference."),d=ia.SCHEMES[(e.scheme||b.scheme||"").toLowerCase()],d&&d.parse&&d.parse(e,b)):e.errors.push("URI can not be parsed."),e},ia._recomposeAuthority=function(a){var b=[];return void 0===a.userinfo&&void 0===a.host&&"number"!=typeof a.port||(void 0!==a.userinfo&&(b.push(a.userinfo.toString().replace(Q,da)),b.push("@")),void 0!==a.host&&b.push(a.host.toString().toLowerCase().replace(R,da)),"number"==typeof a.port&&(b.push(":"),b.push(a.port.toString(10)))),b.length?b.join(""):void 0},ia.removeDotSegments=function(a){for(var b,c=[];a.length;)a.match($)?a=a.replace($,""):a.match(_)?a=a.replace(_,"/"):a.match(aa)?(a=a.replace(aa,"/"),c.pop()):"."===a||".."===a?a="":(b=a.match(ba)[0],a=a.slice(b.length),c.push(b));return c.join("")},ia.serialize=function(a,b){var c,d,e=[];return b=b||{},c=ia.SCHEMES[a.scheme||b.scheme],c&&c.serialize&&c.serialize(a,b),"suffix"!==b.reference&&a.scheme&&(e.push(a.scheme.toString().toLowerCase().replace(P,"")),e.push(":")),a.authority=ia._recomposeAuthority(a),void 0!==a.authority&&("suffix"!==b.reference&&e.push("//"),e.push(a.authority),a.path&&"/"!==a.path.charAt(0)&&e.push("/")),a.path&&(d=ia.removeDotSegments(a.path.toString().replace(/%2E/gi,".")),d=a.scheme?d.replace(S,da):d.replace(T,da),void 0===a.authority&&(d=d.replace(/^\/\//,"/%2F")),e.push(d)),a.query&&(e.push("?"),e.push(a.query.toString().replace(U,da))),a.fragment&&(e.push("#"),e.push(a.fragment.toString().replace(V,da))),e.join("").replace(Y,ea).replace(/%[0-9A-Fa-f]{2}/g,function(a){return a.toUpperCase()})},ia.resolveComponents=function(a,b,c,d){var e=new ha;return d||(a=ia.parse(ia.serialize(a,c),c),b=ia.parse(ia.serialize(b,c),c)),c=c||{},!c.tolerant&&b.scheme?(e.scheme=b.scheme,e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=ia.removeDotSegments(b.path),e.query=b.query):(void 0!==b.authority?(e.authority=b.authority,e.userinfo=b.userinfo,e.host=b.host,e.port=b.port,e.path=ia.removeDotSegments(b.path),e.query=b.query):(b.path?("/"===b.path.charAt(0)?e.path=ia.removeDotSegments(b.path):(void 0===a.authority||a.path?a.path?e.path=a.path.slice(0,a.path.lastIndexOf("/")+1)+b.path:e.path=b.path:e.path="/"+b.path,e.path=ia.removeDotSegments(e.path)),e.query=b.query):(e.path=a.path,void 0!==b.query?e.query=b.query:e.query=a.query),e.authority=a.authority,e.userinfo=a.userinfo,e.host=a.host,e.port=a.port),e.scheme=a.scheme),e.fragment=b.fragment,e},ia.resolve=function(a,b,c){return ia.serialize(ia.resolveComponents(ia.parse(a,c),ia.parse(b,c),c,!0),c)},ia.normalize=function(a,b){return"string"==typeof a?ia.serialize(ia.parse(a,b),b):"object"===ga(a)?ia.parse(ia.serialize(a,b),b):a},ia.equal=function(a,b,c){return"string"==typeof a?a=ia.serialize(ia.parse(a,c),c):"object"===ga(a)&&(a=ia.serialize(a,c)),"string"==typeof b?b=ia.serialize(ia.parse(b,c),c):"object"===ga(b)&&(b=ia.serialize(b,c)),a===b},ia.escapeComponent=function(a){return a&&a.toString().replace(W,da)},ia.unescapeComponent=function(a){return a&&a.toString().replace(Y,fa)},c.pctEncChar=da,c.pctDecChars=fa,c.Components=ha,c.URI=ia,c.pctEncChar=da,c.pctDecChars=fa,c.Components=ha,c.URI={SCHEMES:ia.SCHEMES,parse:ia.parse,removeDotSegments:ia.removeDotSegments,serialize:ia.serialize,resolveComponents:ia.resolveComponents,resolve:ia.resolve,normalize:ia.normalize,equal:ia.equal,escapeComponent:ia.escapeComponent,unescapeComponent:ia.unescapeComponent}}()},{}]},{},[5,1])(5)});
//# sourceMappingURL=jsv.min.js.map
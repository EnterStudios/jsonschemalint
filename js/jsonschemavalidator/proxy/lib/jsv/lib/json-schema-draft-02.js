
(function(){var O={},_1=require("./jsv").JSV,_2,_3,_4,_5,_6;_3={"string":function(_7,_8){return _7.getType()==="string";},"number":function(_9,_a){return _9.getType()==="number";},"integer":function(_b,_c){return _b.getType()==="number"&&_b.getValue()%1===0;},"boolean":function(_d,_e){return _d.getType()==="boolean";},"object":function(_f,_10){return _f.getType()==="object";},"array":function(_11,_12){return _11.getType()==="array";},"null":function(_13,_14){return _13.getType()==="null";},"any":function(_15,_16){return true;}};_2=new _1.Environment();_2.setOption("defaultFragmentDelimiter","/");_2.setOption("defaultSchemaURI","http://json-schema.org/schema#");_4=_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/schema#","type":"object","properties":{"type":{"type":["string","array"],"items":{"type":["string",{"$ref":"#"}]},"optional":true,"uniqueItems":true,"default":"any","parser":function(_17,_18){var _19;if(_17.getType()==="string"){return _17.getValue();}else{if(_17.getType()==="object"){return _17.getEnvironment().createSchema(_17,_18.getEnvironment().findSchema(_18.resolveURI("#")));}else{if(_17.getType()==="array"){_19=_18.getValueOfProperty("parser");return _1.mapArray(_17.getProperties(),function(_1a){return _19(_1a,_18);});}}}return "any";},"validator":function(_1b,_1c,_1d,_1e,_1f,_20,_21){var _22=_1.toArray(_1c.getAttribute("type")),x,xl,_23,_24,_25;if(_1b.getType()!=="undefined"&&_22&&_22.length){_25=_1d.getValueOfProperty("typeValidators")||{};for(x=0,xl=_22.length;x<xl;++x){_23=_22[x];if(_1.isJSONSchema(_23)){_24=_1.createObject(_1e);_24.errors=[];_24.validated=_1.clone(_1e.validated);if(_23.validate(_1b,_24,_1f,_20,_21).errors.length===0){return true;}}else{if(_25[_23]!==O[_23]&&typeof _25[_23]==="function"){if(_25[_23](_1b,_1e)){return true;}}else{return true;}}}_1e.addError(_1b,_1c,"type","Instance is not a required type",_22);return false;}return true;},"typeValidators":_3},"properties":{"type":"object","additionalProperties":{"$ref":"#"},"optional":true,"default":{},"parser":function(_26,_27,arg){var env=_26.getEnvironment(),_28=_27.getEnvironment();if(_26.getType()==="object"){if(arg){return env.createSchema(_26.getProperty(arg),_28.findSchema(_27.resolveURI("#")));}else{return _1.mapObject(_26.getProperties(),function(_29){return env.createSchema(_29,_28.findSchema(_27.resolveURI("#")));});}}return {};},"validator":function(_2a,_2b,_2c,_2d,_2e,_2f,_30){var _31,key;if(_2a.getType()==="object"){_31=_2b.getAttribute("properties");for(key in _31){if(_31[key]!==O[key]&&_31[key]){_31[key].validate(_2a.getProperty(key),_2d,_2a,_2b,key);}}}}},"items":{"type":[{"$ref":"#"},"array"],"items":{"$ref":"#"},"optional":true,"default":{},"parser":function(_32,_33){if(_32.getType()==="object"){return _32.getEnvironment().createSchema(_32,_33.getEnvironment().findSchema(_33.resolveURI("#")));}else{if(_32.getType()==="array"){return _1.mapArray(_32.getProperties(),function(_34){return _34.getEnvironment().createSchema(_34,_33.getEnvironment().findSchema(_33.resolveURI("#")));});}}return _32.getEnvironment().createEmptySchema();},"validator":function(_35,_36,_37,_38,_39,_3a,_3b){var _3c,_3d,x,xl,_3e,_3f;if(_35.getType()==="array"){_3c=_35.getProperties();_3d=_36.getAttribute("items");_3f=_36.getAttribute("additionalProperties");if(_1.typeOf(_3d)==="array"){for(x=0,xl=_3c.length;x<xl;++x){_3e=_3d[x]||_3f;if(_3e!==false){_3e.validate(_3c[x],_38,_35,_36,x);}else{_38.addError(_35,_36,"additionalProperties","Additional items are not allowed",_3e);}}}else{_3e=_3d||_3f;for(x=0,xl=_3c.length;x<xl;++x){_3e.validate(_3c[x],_38,_35,_36,x);}}}}},"optional":{"type":"boolean","optional":true,"default":false,"parser":function(_40,_41){return !!_40.getValue();},"validator":function(_42,_43,_44,_45,_46,_47,_48){if(_42.getType()==="undefined"&&!_43.getAttribute("optional")){_45.addError(_42,_43,"optional","Property is required",false);}},"validationRequired":true},"additionalProperties":{"type":[{"$ref":"#"},"boolean"],"optional":true,"default":{},"parser":function(_49,_4a){if(_49.getType()==="object"){return _49.getEnvironment().createSchema(_49,_4a.getEnvironment().findSchema(_4a.resolveURI("#")));}else{if(_49.getType()==="boolean"&&_49.getValue()===false){return false;}}return _49.getEnvironment().createEmptySchema();},"validator":function(_4b,_4c,_4d,_4e,_4f,_50,_51){var _52,_53,_54,key;if(_4b.getType()==="object"){_52=_4c.getAttribute("additionalProperties");_53=_4c.getAttribute("properties")||{};_54=_4b.getProperties();for(key in _54){if(_54[key]!==O[key]&&_54[key]&&!_53[key]){if(_1.isJSONSchema(_52)){_52.validate(_54[key],_4e,_4b,_4c,key);}else{if(_52===false){_4e.addError(_4b,_4c,"additionalProperties","Additional properties are not allowed",_52);}}}}}}},"requires":{"type":["string",{"$ref":"#"}],"optional":true,"parser":function(_55,_56){if(_55.getType()==="string"){return _55.getValue();}else{if(_55.getType()==="object"){return _55.getEnvironment().createSchema(_55,_56.getEnvironment().findSchema(_56.resolveURI("#")));}}},"validator":function(_57,_58,_59,_5a,_5b,_5c,_5d){var _5e;if(_57.getType()!=="undefined"&&_5b&&_5b.getType()!=="undefined"){_5e=_58.getAttribute("requires");if(typeof _5e==="string"){if(_5b.getProperty(_5e).getType()==="undefined"){_5a.addError(_57,_58,"requires","Property requires sibling property \""+_5e+"\"",_5e);}}else{if(_1.isJSONSchema(_5e)){_5e.validate(_5b,_5a);}}}}},"minimum":{"type":"number","optional":true,"parser":function(_5f,_60){if(_5f.getType()==="number"){return _5f.getValue();}},"validator":function(_61,_62,_63,_64,_65,_66,_67){var _68,_69;if(_61.getType()==="number"){_68=_62.getAttribute("minimum");_69=_62.getAttribute("minimumCanEqual");if(typeof _68==="number"&&(_61.getValue()<_68||(_69===false&&_61.getValue()===_68))){_64.addError(_61,_62,"minimum","Number is less then the required minimum value",_68);}}}},"maximum":{"type":"number","optional":true,"parser":function(_6a,_6b){if(_6a.getType()==="number"){return _6a.getValue();}},"validator":function(_6c,_6d,_6e,_6f,_70,_71,_72){var _73,_74;if(_6c.getType()==="number"){_73=_6d.getAttribute("maximum");_74=_6d.getAttribute("maximumCanEqual");if(typeof _73==="number"&&(_6c.getValue()>_73||(_74===false&&_6c.getValue()===_73))){_6f.addError(_6c,_6d,"maximum","Number is greater then the required maximum value",_73);}}}},"minimumCanEqual":{"type":"boolean","optional":true,"requires":"minimum","default":true,"parser":function(_75,_76){if(_75.getType()==="boolean"){return _75.getValue();}return true;}},"maximumCanEqual":{"type":"boolean","optional":true,"requires":"maximum","default":true,"parser":function(_77,_78){if(_77.getType()==="boolean"){return _77.getValue();}return true;}},"minItems":{"type":"integer","optional":true,"minimum":0,"default":0,"parser":function(_79,_7a){if(_79.getType()==="number"){return _79.getValue();}return 0;},"validator":function(_7b,_7c,_7d,_7e,_7f,_80,_81){var _82;if(_7b.getType()==="array"){_82=_7c.getAttribute("minItems");if(typeof _82==="number"&&_7b.getProperties().length<_82){_7e.addError(_7b,_7c,"minItems","The number of items is less then the required minimum",_82);}}}},"maxItems":{"type":"integer","optional":true,"minimum":0,"parser":function(_83,_84){if(_83.getType()==="number"){return _83.getValue();}},"validator":function(_85,_86,_87,_88,_89,_8a,_8b){var _8c;if(_85.getType()==="array"){_8c=_86.getAttribute("maxItems");if(typeof _8c==="number"&&_85.getProperties().length>_8c){_88.addError(_85,_86,"maxItems","The number of items is greater then the required maximum",_8c);}}}},"uniqueItems":{"type":"boolean","optional":true,"default":false,"parser":function(_8d,_8e){return !!_8d.getValue();},"validator":function(_8f,_90,_91,_92,_93,_94,_95){var _96,x,xl,y,yl;if(_8f.getType()==="array"&&_90.getAttribute("uniqueItems")){_96=_8f.getProperties();for(x=0,xl=_96.length-1;x<xl;++x){for(y=x+1,yl=_96.length;y<yl;++y){if(_96[x].equals(_96[y])){_92.addError(_8f,_90,"uniqueItems","Array can only contain unique items",{x:x,y:y});}}}}}},"pattern":{"type":"string","optional":true,"format":"regex","parser":function(_97,_98){if(_97.getType()==="string"){try{return new RegExp(_97.getValue());}catch(e){return e;}}},"validator":function(_99,_9a,_9b,_9c,_9d,_9e,_9f){var _a0;try{_a0=_9a.getAttribute("pattern");if(_a0 instanceof Error){_9c.addError(_99,_9a,"pattern","Invalid pattern",_a0);}else{if(_99.getType()==="string"&&_a0&&!_a0.test(_99.getValue())){_9c.addError(_99,_9a,"pattern","String does not match pattern",_a0.toString());}}}catch(e){_9c.addError(_99,_9a,"pattern","Invalid pattern",e);}}},"minLength":{"type":"integer","optional":true,"minimum":0,"default":0,"parser":function(_a1,_a2){if(_a1.getType()==="number"){return _a1.getValue();}return 0;},"validator":function(_a3,_a4,_a5,_a6,_a7,_a8,_a9){var _aa;if(_a3.getType()==="string"){_aa=_a4.getAttribute("minLength");if(typeof _aa==="number"&&_a3.getValue().length<_aa){_a6.addError(_a3,_a4,"minLength","String is less then the required minimum length",_aa);}}}},"maxLength":{"type":"integer","optional":true,"parser":function(_ab,_ac){if(_ab.getType()==="number"){return _ab.getValue();}},"validator":function(_ad,_ae,_af,_b0,_b1,_b2,_b3){var _b4;if(_ad.getType()==="string"){_b4=_ae.getAttribute("maxLength");if(typeof _b4==="number"&&_ad.getValue().length>_b4){_b0.addError(_ad,_ae,"maxLength","String is greater then the required maximum length",_b4);}}}},"enum":{"type":"array","optional":true,"minItems":1,"uniqueItems":true,"parser":function(_b5,_b6){if(_b5.getType()==="array"){return _b5.getValue();}},"validator":function(_b7,_b8,_b9,_ba,_bb,_bc,_bd){var _be,x,xl;if(_b7.getType()!=="undefined"){_be=_b8.getAttribute("enum");if(_be){for(x=0,xl=_be.length;x<xl;++x){if(_b7.equals(_be[x])){return true;}}_ba.addError(_b7,_b8,"enum","Instance is not one of the possible values",_be);}}}},"title":{"type":"string","optional":true},"description":{"type":"string","optional":true},"format":{"type":"string","optional":true,"parser":function(_bf,_c0){if(_bf.getType()==="string"){return _bf.getValue();}},"validator":function(_c1,_c2,_c3,_c4,_c5,_c6,_c7){var _c8,_c9;if(_c1.getType()==="string"){_c8=_c2.getAttribute("format");_c9=_c3.getValueOfProperty("formatValidators");if(typeof _c8==="string"&&_c9[_c8]!==O[_c8]&&typeof _c9[_c8]==="function"&&!_c9[_c8].call(this,_c1,_c4)){_c4.addError(_c1,_c2,"format","String is not in the required format",_c8);}}},"formatValidators":{}},"contentEncoding":{"type":"string","optional":true},"default":{"type":"any","optional":true},"divisibleBy":{"type":"number","minimum":0,"minimumCanEqual":false,"optional":true,"parser":function(_ca,_cb){if(_ca.getType()==="number"){return _ca.getValue();}},"validator":function(_cc,_cd,_ce,_cf,_d0,_d1,_d2){var _d3;if(_cc.getType()==="number"){_d3=_cd.getAttribute("divisibleBy");if(_d3===0){_cf.addError(_cc,_cd,"divisibleBy","Nothing is divisible by 0",_d3);}else{if(_d3!==1&&((_cc.getValue()/_d3)%1)!==0){_cf.addError(_cc,_cd,"divisibleBy","Number is not divisible by "+_d3,_d3);}}}}},"disallow":{"type":["string","array"],"items":{"type":"string"},"optional":true,"uniqueItems":true,"parser":function(_d4,_d5){if(_d4.getType()==="string"||_d4.getType()==="array"){return _d4.getValue();}},"validator":function(_d6,_d7,_d8,_d9,_da,_db,_dc){var _dd=_1.toArray(_d7.getAttribute("disallow")),x,xl,key,_de;if(_d6.getType()!=="undefined"&&_dd&&_dd.length){_de=_d8.getValueOfProperty("typeValidators")||{};for(x=0,xl=_dd.length;x<xl;++x){key=_dd[x];if(_de[key]!==O[key]&&typeof _de[key]==="function"){if(_de[key](_d6,_d9)){_d9.addError(_d6,_d7,"disallow","Instance is a disallowed type",_dd);return false;}}}return true;}return true;},"typeValidators":_3},"extends":{"type":[{"$ref":"#"},"array"],"items":{"$ref":"#"},"optional":true,"default":{},"parser":function(_df,_e0){if(_df.getType()==="object"){return _df.getEnvironment().createSchema(_df,_e0.getEnvironment().findSchema(_e0.resolveURI("#")));}else{if(_df.getType()==="array"){return _1.mapArray(_df.getProperties(),function(_e1){return _e1.getEnvironment().createSchema(_e1,_e0.getEnvironment().findSchema(_e0.resolveURI("#")));});}}},"validator":function(_e2,_e3,_e4,_e5,_e6,_e7,_e8){var _e9=_e3.getAttribute("extends"),x,xl;if(_e9){if(_1.isJSONSchema(_e9)){_e9.validate(_e2,_e5,_e6,_e7,_e8);}else{if(_1.typeOf(_e9)==="array"){for(x=0,xl=_e9.length;x<xl;++x){_e9[x].validate(_e2,_e5,_e6,_e7,_e8);}}}}}}},"optional":true,"default":{},"fragmentResolution":"slash-delimited","parser":function(_ea,_eb){if(_ea.getType()==="object"){return _ea.getEnvironment().createSchema(_ea,_eb);}},"validator":function(_ec,_ed,_ee,_ef,_f0,_f1,_f2){var _f3=_ed.getPropertyNames(),x,xl,_f4=_ee.getAttribute("properties"),_f5;for(x in _f4){if(_f4[x]!==O[x]&&_f4[x].getValueOfProperty("validationRequired")){_1.pushUnique(_f3,x);}}for(x=0,xl=_f3.length;x<xl;++x){if(_f4[_f3[x]]!==O[_f3[x]]){_f5=_f4[_f3[x]].getValueOfProperty("validator");if(typeof _f5==="function"){_f5(_ec,_ed,_f4[_f3[x]],_ef,_f0,_f1,_f2);}}}},"initializer":function(_f6){var _f7,_f8,_f9;do{_f7=_f6._schema.getLink("full",_f6);if(_f7&&_f6._uri!==_f7&&_f6._env._schemas[_f7]){_f6=_f6._env._schemas[_f7];return _f6;}_f7=_f6._schema.getLink("describedby",_f6);if(_f7&&_f6._schema._uri!==_f7&&_f6._env._schemas[_f7]){_f6._schema=_f6._env._schemas[_f7];continue;}_f8=_f6.getAttribute("extends");if(_1.isJSONSchema(_f8)){_f9=_1.inherits(_f8,_f6,true);_f6=_f6._env.createSchema(_f9,_f6._schema,_f6._uri);}break;}while(true);_f7=_f6._schema.getLink("self",_f6);if(_f7){_f6._uri=_f7;}return _f6;}},true,"http://json-schema.org/schema#");_5=_2.createSchema(_1.inherits(_4,_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/hyper-schema#","properties":{"links":{"type":"array","items":{"$ref":"links#"},"optional":true,"parser":function(_fa,_fb,arg){var _fc,_fd=_fb.getValueOfProperty("items")["$ref"],_fe=_fb.getEnvironment().findSchema(_fd),_ff=_fe&&_fe.getValueOfProperty("parser");arg=_1.toArray(arg);if(typeof _ff==="function"){_fc=_1.mapArray(_fa.getProperties(),function(link){return _ff(link,_fe);});}else{_fc=_1.toArray(_fa.getValue());}if(arg[0]){_fc=_1.filterArray(_fc,function(link){return link["rel"]===arg[0];});}if(arg[1]){_fc=_1.mapArray(_fc,function(link){var _100=arg[1],href=link["href"];href=href.replace(/\{(.+)\}/g,function(str,p1,_101,s){var _102;if(p1==="-this"){_102=_100.getValue();}else{_102=_100.getValueOfProperty(p1);}return _102!==undefined?String(_102):"";});return href?_1.formatURI(_100.resolveURI(href)):href;});}return _fc;}},"fragmentResolution":{"type":"string","optional":true,"default":"slash-delimited"},"root":{"type":"boolean","optional":true,"default":false},"readonly":{"type":"boolean","optional":true,"default":false},"pathStart":{"type":"string","optional":true,"format":"uri","validator":function(_103,_104,self,_105,_106,_107,name){var _108;if(_103.getType()!=="undefined"){_108=_104.getAttribute("pathStart");if(typeof _108==="string"){if(_103.getURI().indexOf(_108)!==0){_105.addError(_103,_104,"pathStart","Instance's URI does not start with "+_108,_108);}}}}},"mediaType":{"type":"string","optional":true,"format":"media-type"},"alternate":{"type":"array","items":{"$ref":"#"},"optional":true}},"links":[{"href":"{$ref}","rel":"full"},{"href":"{$schema}","rel":"describedby"},{"href":"{id}","rel":"self"}]},_4),true),true,"http://json-schema.org/hyper-schema#");_2.setOption("defaultSchemaURI","http://json-schema.org/hyper-schema#");_6=_2.createSchema({"$schema":"http://json-schema.org/hyper-schema#","id":"http://json-schema.org/links#","type":"object","properties":{"href":{"type":"string"},"rel":{"type":"string"},"targetSchema":{"$ref":"hyper-schema#","parser":_5.getAttribute("parser")},"method":{"type":"string","default":"GET","optional":true},"enctype":{"type":"string","requires":"method","optional":true},"properties":{"type":"object","additionalProperties":{"$ref":"hyper-schema#"},"optional":true,"parser":function(_109,self,arg){var env=_109.getEnvironment(),_10a=self.getEnvironment(),_10b=self.getValueOfProperty("additionalProperties")["$ref"];if(_109.getType()==="object"){if(arg){return env.createSchema(_109.getProperty(arg),_10a.findSchema(self.resolveURI(_10b)));}else{return _1.mapObject(_109.getProperties(),function(_10c){return env.createSchema(_10c,_10a.findSchema(self.resolveURI(_10b)));});}}}}},"parser":function(_10d,self){var _10e=self.getProperty("properties");if(_10d.getType()==="object"){return _1.mapObject(_10d.getProperties(),function(_10f,key){var _110=_10e.getProperty(key),_111=_110&&_110.getValueOfProperty("parser");if(typeof _111==="function"){return _111(_10f,_110);}return _10f.getValue();});}return _10d.getValue();}},_5,"http://json-schema.org/links#");_4=_2.createSchema(_4.getValue(),_5,"http://json-schema.org/schema#");_5=_2.createSchema(_5.getValue(),_5,"http://json-schema.org/hyper-schema#");_6=_2.createSchema(_6.getValue(),_5,"http://json-schema.org/links#");_1.registerEnvironment("json-schema-draft-02",_2);if(!_1.getDefaultEnvironmentID()||_1.getDefaultEnvironmentID()==="json-schema-draft-01"){_1.setDefaultEnvironmentID("json-schema-draft-02");}}());